###############################################################################
#                                                                             #
# IAR C/C++ Compiler V7.51A/W32 for 8051                06/Jan/2013  14:27:14 #
# Copyright 2004-2009 IAR Systems AB.                                         #
#                                                                             #
#    Core               =  plain                                              #
#    Code model         =  banked                                             #
#    Data model         =  large                                              #
#    Calling convention =  xdata reentrant                                    #
#    Constant location  =  data_rom                                           #
#    Dptr setup         =  1,16                                               #
#    Source file        =  C:\Texas Instruments\ZStack-CC2530-2.3.0-1.4.0\Com #
#                          ponents\hal\target\CC2530EB\hal_lcd.c              #
#    Command line       =  -f "C:\Texas Instruments\ZStack-CC2530-2.3.0-1.4.0 #
#                          \Projects\zstack\Samples\second_uart_App\CC2530DB\ #
#                          ..\..\..\Tools\CC2530DB\f8wCoord.cfg" (-DCPU32MHZ  #
#                          -DROOT=__near_func -DMAC_CFG_APP_PENDING_QUEUE=TRU #
#                          E -DZDO_COORDINATOR -DBLINK_LEDS) -f "C:\Texas     #
#                          Instruments\ZStack-CC2530-2.3.0-1.4.0\Projects\zst #
#                          ack\Samples\second_uart_App\CC2530DB\..\..\..\Tool #
#                          s\CC2530DB\f8wConfig.cfg" (-DSECURE=0              #
#                          -DZG_SECURE_DYNAMIC=0 -DREFLECTOR                  #
#                          -DDEFAULT_CHANLIST=0x00000800                      #
#                          -DZDAPP_CONFIG_PAN_ID=0x1234                       #
#                          -DNWK_START_DELAY=100 -DEXTENDED_JOINING_RANDOM_MA #
#                          SK=0x007F -DBEACON_REQUEST_DELAY=100               #
#                          -DBEACON_REQ_DELAY_MASK=0x00FF                     #
#                          -DROUTE_EXPIRY_TIME=30 -DAPSC_ACK_WAIT_DURATION_PO #
#                          LLED=3000 -DNWK_INDIRECT_MSG_TIMEOUT=7             #
#                          -DMAX_RREQ_ENTRIES=8 -DAPSC_MAX_FRAME_RETRIES=3    #
#                          -DNWK_MAX_DATA_RETRIES=2                           #
#                          -DMAX_POLL_FAILURE_RETRIES=2 -DMAX_BCAST=9         #
#                          -DAPS_MAX_GROUPS=16 -DMAX_RTG_ENTRIES=40           #
#                          -DNWK_MAX_BINDING_ENTRIES=4                        #
#                          -DMAX_BINDING_CLUSTER_IDS=4 "-DDEFAULT_KEY={0x01,  #
#                          0x03, 0x05, 0x07, 0x09, 0x0B, 0x0D, 0x0F, 0x00,    #
#                          0x02, 0x04, 0x06, 0x08, 0x0A, 0x0C, 0x0D}"         #
#                          -DMAC_MAX_FRAME_SIZE=116 "-DCONST=const __code"    #
#                          -DGENERIC=__generic -DRFD_RCVC_ALWAYS_ON=FALSE     #
#                          -DPOLL_RATE=1000 -DQUEUED_POLL_RATE=100            #
#                          -DRESPONSE_POLL_RATE=100) -DREJOIN_POLL_RATE=440   #
#                          "C:\Texas Instruments\ZStack-CC2530-2.3.0-1.4.0\Co #
#                          mponents\hal\target\CC2530EB\hal_lcd.c" -D         #
#                          ZTOOL_P1 -D MT_TASK -D MT_SYS_FUNC -D MT_ZDO_FUNC  #
#                          -D HAL_UART=TRUE -D LCD_SUPPORTED=DEBUG -lC        #
#                          "C:\Texas Instruments\ZStack-CC2530-2.3.0-1.4.0\Pr #
#                          ojects\zstack\Samples\second_uart_App\CC2530DB\Coo #
#                          rdinatorEB\List\" -lA "C:\Texas                    #
#                          Instruments\ZStack-CC2530-2.3.0-1.4.0\Projects\zst #
#                          ack\Samples\second_uart_App\CC2530DB\CoordinatorEB #
#                          \List\" --diag_suppress Pe001,Pa010 -o "C:\Texas   #
#                          Instruments\ZStack-CC2530-2.3.0-1.4.0\Projects\zst #
#                          ack\Samples\second_uart_App\CC2530DB\CoordinatorEB #
#                          \Obj\" -e --require_prototypes --debug             #
#                          --core=plain --dptr=16,1 --data_model=large        #
#                          --code_model=banked --calling_convention=xdata_ree #
#                          ntrant --place_constants=data_rom                  #
#                          --nr_virtual_regs 16 -I "C:\Texas                  #
#                          Instruments\ZStack-CC2530-2.3.0-1.4.0\Projects\zst #
#                          ack\Samples\second_uart_App\CC2530DB\" -I          #
#                          "C:\Texas Instruments\ZStack-CC2530-2.3.0-1.4.0\Pr #
#                          ojects\zstack\Samples\second_uart_App\CC2530DB\..\ #
#                          SOURCE\" -I "C:\Texas Instruments\ZStack-CC2530-2. #
#                          3.0-1.4.0\Projects\zstack\Samples\second_uart_App\ #
#                          CC2530DB\..\..\..\ZMAIN\TI2530DB\" -I "C:\Texas    #
#                          Instruments\ZStack-CC2530-2.3.0-1.4.0\Projects\zst #
#                          ack\Samples\second_uart_App\CC2530DB\..\..\..\..\. #
#                          .\COMPONENTS\MT\" -I "C:\Texas                     #
#                          Instruments\ZStack-CC2530-2.3.0-1.4.0\Projects\zst #
#                          ack\Samples\second_uart_App\CC2530DB\..\..\..\..\. #
#                          .\COMPONENTS\HAL\INCLUDE\" -I "C:\Texas            #
#                          Instruments\ZStack-CC2530-2.3.0-1.4.0\Projects\zst #
#                          ack\Samples\second_uart_App\CC2530DB\..\..\..\..\. #
#                          .\COMPONENTS\HAL\TARGET\CC2530EB\" -I "C:\Texas    #
#                          Instruments\ZStack-CC2530-2.3.0-1.4.0\Projects\zst #
#                          ack\Samples\second_uart_App\CC2530DB\..\..\..\..\. #
#                          .\COMPONENTS\OSAL\MCU\CCSOC\" -I "C:\Texas         #
#                          Instruments\ZStack-CC2530-2.3.0-1.4.0\Projects\zst #
#                          ack\Samples\second_uart_App\CC2530DB\..\..\..\..\. #
#                          .\COMPONENTS\OSAL\INCLUDE\" -I "C:\Texas           #
#                          Instruments\ZStack-CC2530-2.3.0-1.4.0\Projects\zst #
#                          ack\Samples\second_uart_App\CC2530DB\..\..\..\..\. #
#                          .\COMPONENTS\STACK\AF\" -I "C:\Texas               #
#                          Instruments\ZStack-CC2530-2.3.0-1.4.0\Projects\zst #
#                          ack\Samples\second_uart_App\CC2530DB\..\..\..\..\. #
#                          .\COMPONENTS\STACK\NWK\" -I "C:\Texas              #
#                          Instruments\ZStack-CC2530-2.3.0-1.4.0\Projects\zst #
#                          ack\Samples\second_uart_App\CC2530DB\..\..\..\..\. #
#                          .\COMPONENTS\STACK\SEC\" -I "C:\Texas              #
#                          Instruments\ZStack-CC2530-2.3.0-1.4.0\Projects\zst #
#                          ack\Samples\second_uart_App\CC2530DB\..\..\..\..\. #
#                          .\COMPONENTS\STACK\SAPI\" -I "C:\Texas             #
#                          Instruments\ZStack-CC2530-2.3.0-1.4.0\Projects\zst #
#                          ack\Samples\second_uart_App\CC2530DB\..\..\..\..\. #
#                          .\COMPONENTS\STACK\SYS\" -I "C:\Texas              #
#                          Instruments\ZStack-CC2530-2.3.0-1.4.0\Projects\zst #
#                          ack\Samples\second_uart_App\CC2530DB\..\..\..\..\. #
#                          .\COMPONENTS\STACK\ZDO\" -I "C:\Texas              #
#                          Instruments\ZStack-CC2530-2.3.0-1.4.0\Projects\zst #
#                          ack\Samples\second_uart_App\CC2530DB\..\..\..\..\. #
#                          .\COMPONENTS\ZMAC\F8W\" -I "C:\Texas               #
#                          Instruments\ZStack-CC2530-2.3.0-1.4.0\Projects\zst #
#                          ack\Samples\second_uart_App\CC2530DB\..\..\..\..\. #
#                          .\COMPONENTS\ZMAC\" -I "C:\Texas                   #
#                          Instruments\ZStack-CC2530-2.3.0-1.4.0\Projects\zst #
#                          ack\Samples\second_uart_App\CC2530DB\..\..\..\..\. #
#                          .\COMPONENTS\SERVICES\SADDR\" -I "C:\Texas         #
#                          Instruments\ZStack-CC2530-2.3.0-1.4.0\Projects\zst #
#                          ack\Samples\second_uart_App\CC2530DB\..\..\..\..\. #
#                          .\COMPONENTS\SERVICES\SDATA\" -I "C:\Texas         #
#                          Instruments\ZStack-CC2530-2.3.0-1.4.0\Projects\zst #
#                          ack\Samples\second_uart_App\CC2530DB\..\..\..\..\. #
#                          .\COMPONENTS\MAC\INCLUDE\" -I "C:\Texas            #
#                          Instruments\ZStack-CC2530-2.3.0-1.4.0\Projects\zst #
#                          ack\Samples\second_uart_App\CC2530DB\..\..\..\..\. #
#                          .\COMPONENTS\MAC\HIGH_LEVEL\" -I "C:\Texas         #
#                          Instruments\ZStack-CC2530-2.3.0-1.4.0\Projects\zst #
#                          ack\Samples\second_uart_App\CC2530DB\..\..\..\..\. #
#                          .\COMPONENTS\MAC\LOW_LEVEL\srf04\" -I "C:\Texas    #
#                          Instruments\ZStack-CC2530-2.3.0-1.4.0\Projects\zst #
#                          ack\Samples\second_uart_App\CC2530DB\..\..\..\..\. #
#                          .\COMPONENTS\MAC\LOW_LEVEL\srf04\SINGLE_CHIP\" -I  #
#                          "C:\Program Files\IAR Systems\Embedded Workbench   #
#                          5.3\8051\INC\" -I "C:\Program Files\IAR            #
#                          Systems\Embedded Workbench 5.3\8051\INC\CLIB\"     #
#                          -Ohz                                               #
#    List file          =  C:\Texas Instruments\ZStack-CC2530-2.3.0-1.4.0\Pro #
#                          jects\zstack\Samples\second_uart_App\CC2530DB\Coor #
#                          dinatorEB\List\hal_lcd.lst                         #
#    Object file        =  C:\Texas Instruments\ZStack-CC2530-2.3.0-1.4.0\Pro #
#                          jects\zstack\Samples\second_uart_App\CC2530DB\Coor #
#                          dinatorEB\Obj\hal_lcd.r51                          #
#                                                                             #
#                                                                             #
###############################################################################

C:\Texas Instruments\ZStack-CC2530-2.3.0-1.4.0\Components\hal\target\CC2530EB\hal_lcd.c
      1          /**************************************************************************************************
      2            Filename:       hal_lcd.c
      3            Revised:        $Date: 2010-5-31$
      4            Author:         $QIUJIE TECH.INC$
      5          
      6            Description:    This file contains the interface to the HAL LCD Service. 
      7          
      8            IMPORTANT:   THE ORIGINAL CODE IS FROM TI, AND THE FONTS LIB AND 
      9                                RELATED CODE IS WRITTEN QIUJIE TECH
     10          
     11          
     12            Copyright 2007 - 2009 Texas Instruments Incorporated. All rights reserved.
     13          
     14            IMPORTANT: Your use of this Software is limited to those specific rights
     15            granted under the terms of a software license agreement between the user
     16            who downloaded the software, his/her employer (which must be your employer)
     17            and Texas Instruments Incorporated (the "License").  You may not use this
     18            Software unless you agree to abide by the terms of the License. The License
     19            limits your use, and you acknowledge, that the Software may not be modified,
     20            copied or distributed unless embedded on a Texas Instruments microcontroller
     21            or used solely and exclusively in conjunction with a Texas Instruments radio
     22            frequency transceiver, which is integrated into your product.  Other than for
     23            the foregoing purpose, you may not use, reproduce, copy, prepare derivative
     24            works of, modify, distribute, perform, display or sell this Software and/or
     25            its documentation for any purpose.
     26          
     27            YOU FURTHER ACKNOWLEDGE AND AGREE THAT THE SOFTWARE AND DOCUMENTATION ARE
     28            PROVIDED “AS IS?WITHOUT WARRANTY OF ANY KIND, EITHER EXPRESS OR IMPLIED,
     29            INCLUDING WITHOUT LIMITATION, ANY WARRANTY OF MERCHANTABILITY, TITLE,
     30            NON-INFRINGEMENT AND FITNESS FOR A PARTICULAR PURPOSE. IN NO EVENT SHALL
     31            TEXAS INSTRUMENTS OR ITS LICENSORS BE LIABLE OR OBLIGATED UNDER CONTRACT,
     32            NEGLIGENCE, STRICT LIABILITY, CONTRIBUTION, BREACH OF WARRANTY, OR OTHER
     33            LEGAL EQUITABLE THEORY ANY DIRECT OR INDIRECT DAMAGES OR EXPENSES
     34            INCLUDING BUT NOT LIMITED TO ANY INCIDENTAL, SPECIAL, INDIRECT, PUNITIVE
     35            OR CONSEQUENTIAL DAMAGES, LOST PROFITS OR LOST DATA, COST OF PROCUREMENT
     36            OF SUBSTITUTE GOODS, TECHNOLOGY, SERVICES, OR ANY CLAIMS BY THIRD PARTIES
     37            (INCLUDING BUT NOT LIMITED TO ANY DEFENSE THEREOF), OR OTHER SIMILAR COSTS.
     38          
     39            Should you have any questions regarding your right to use this Software,
     40            contact Texas Instruments Incorporated at www.TI.com.
     41          **************************************************************************************************/
     42          
     43          /**************************************************************************************************
     44           *                                           INCLUDES
     45           **************************************************************************************************/
     46          #include "hal_types.h"
     47          #include "hal_lcd.h"

   \                                 In  segment SFR_AN, at 0x80
   \   union <unnamed> volatile __sfr _A_P0
   \                     _A_P0:
   \   000000                DS 1

   \                                 In  segment SFR_AN, at 0x90
   \   union <unnamed> volatile __sfr _A_P1
   \                     _A_P1:
   \   000000                DS 1

   \                                 In  segment SFR_AN, at 0xf1
   \   unsigned char volatile __sfr PERCFG
   \                     PERCFG:
   \   000000                DS 1

   \                                 In  segment SFR_AN, at 0xf3
   \   unsigned char volatile __sfr P0SEL
   \                     P0SEL:
   \   000000                DS 1

   \                                 In  segment SFR_AN, at 0xf4
   \   unsigned char volatile __sfr P1SEL
   \                     P1SEL:
   \   000000                DS 1

   \                                 In  segment SFR_AN, at 0xf8
   \   union <unnamed> volatile __sfr _A_U1CSR
   \                     _A_U1CSR:
   \   000000                DS 1

   \                                 In  segment SFR_AN, at 0xf9
   \   unsigned char volatile __sfr U1DBUF
   \                     U1DBUF:
   \   000000                DS 1

   \                                 In  segment SFR_AN, at 0xfa
   \   unsigned char volatile __sfr U1BAUD
   \                     U1BAUD:
   \   000000                DS 1

   \                                 In  segment SFR_AN, at 0xfb
   \   unsigned char volatile __sfr U1UCR
   \                     U1UCR:
   \   000000                DS 1

   \                                 In  segment SFR_AN, at 0xfc
   \   unsigned char volatile __sfr U1GCR
   \                     U1GCR:
   \   000000                DS 1

   \                                 In  segment SFR_AN, at 0xfd
   \   unsigned char volatile __sfr P0DIR
   \                     P0DIR:
   \   000000                DS 1

   \                                 In  segment SFR_AN, at 0xfe
   \   unsigned char volatile __sfr P1DIR
   \                     P1DIR:
   \   000000                DS 1
     48          #include "OSAL.h"
     49          #include "OnBoard.h"
     50          #include "hal_assert.h"
     51          
     52          #if defined (ZTOOL_P1) || defined (ZTOOL_P2)
     53            #include "DebugTrace.h"
     54          #endif
     55          
     56          /**************************************************************************************************
     57           *                                          CONSTANTS
     58           **************************************************************************************************/
     59          /*
     60            LCD pins
     61          
     62            //control
     63            P0.0 - LCD_MODE
     64            P1.1 - LCD_FLASH_RESET
     65            P1.2 - LCD_CS
     66          
     67            //spi
     68            P1.5 - CLK
     69            P1.6 - MOSI
     70            P1.7 - MISO
     71          */
     72          
     73          
     74          #define BIT0              0x01
     75          #define BIT1              0x02
     76          #define BIT2              0x04
     77          #define BIT3              0x08
     78          #define BIT4              0x10
     79          #define BIT5              0x20
     80          #define BIT6              0x40
     81          #define BIT7              0x80
     82          
     83          /* The ASCII fonts library, the matrix size is w*h = 8*12, created by QIUJIE TECH.INC */

   \                                 In  segment CODE_C, align 1
     84          __code const uint8 ASCIITAB_DZK[]=
   \                     ASCIITAB_DZK:
   \   000000   00000000     DB 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 48, 120, 120, 120, 48, 48, 0
   \            00000000
   \            00000000
   \            00307878
   \            78303000
   \   000014   30300000     DB 48, 48, 0, 0, 0, 0, 102, 102, 102, 36, 0, 0, 0, 0, 0, 0, 0, 0, 108
   \            00006666
   \            66240000
   \            00000000
   \            00006C  
   \   000027   6CFE6C6C     DB 108, 254, 108, 108, 108, 254, 108, 108, 0, 0, 48, 48, 124, 192, 192
   \            6CFE6C6C
   \            00003030
   \            7CC0C0  
   \   000036   780C0CF8     DB 120, 12, 12, 248, 48, 48, 0, 0, 0, 0, 196, 204, 24, 48, 96, 204, 140
   \            30300000
   \            0000C4CC
   \            183060CC
   \            8C      
   \   000047   00000070     DB 0, 0, 0, 112, 216, 216, 112, 250, 222, 204, 220, 118, 0, 0, 0, 48
   \            D8D870FA
   \            DECCDC76
   \            00000030
   \   000057   30306000     DB 48, 48, 96, 0, 0, 0, 0, 0, 0, 0, 0, 12, 24, 48, 96, 96, 96, 48, 24
   \            00000000
   \            0000000C
   \            18306060
   \            603018  
   \   00006A   0C000000     DB 12, 0, 0, 0, 96, 48, 24, 12, 12, 12, 24, 48, 96, 0, 0, 0, 0, 0, 102
   \            6030180C
   \            0C0C1830
   \            60000000
   \            000066  
   \   00007D   3CFF3C66     DB 60, 255, 60, 102, 0, 0, 0, 0, 0, 0, 0, 24, 24, 126, 24, 24, 0, 0, 0
   \            00000000
   \            00000018
   \            187E1818
   \            000000  
   \   000090   00000000     DB 0, 0, 0, 0, 0, 0, 0, 0, 0, 56, 56, 96, 0, 0, 0, 0, 0, 0, 254, 0, 0
   \            00000000
   \            00383860
   \            00000000
   \            0000FE00
   \            00      
   \   0000A5   00000000     DB 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 56, 56, 0, 0, 0, 0, 2, 6, 12, 24
   \            00000000
   \            00000000
   \            38380000
   \            00000206
   \            0C18    
   \   0000BB   3060C080     DB 48, 96, 192, 128, 0, 0, 0, 124, 198, 206, 222, 214, 246, 230, 198
   \            0000007C
   \            C6CEDED6
   \            F6E6C6  
   \   0000CA   7C000000     DB 124, 0, 0, 0, 16, 48, 240, 48, 48, 48, 48, 48, 252, 0, 0, 0, 120
   \            1030F030
   \            30303030
   \            FC000000
   \            78      
   \   0000DB   CCCC0C18     DB 204, 204, 12, 24, 48, 96, 204, 252, 0, 0, 0, 120, 204, 12, 12, 56
   \            3060CCFC
   \            00000078
   \            CC0C0C38
   \   0000EB   0C0CCC78     DB 12, 12, 204, 120, 0, 0, 0, 12, 28, 60, 108, 204, 254, 12, 12, 30, 0
   \            0000000C
   \            1C3C6CCC
   \            FE0C0C1E
   \            00      
   \   0000FC   0000FCC0     DB 0, 0, 252, 192, 192, 192, 248, 12, 12, 204, 120, 0, 0, 0, 56, 96
   \            C0C0F80C
   \            0CCC7800
   \            00003860
   \   00010C   C0C0F8CC     DB 192, 192, 248, 204, 204, 204, 120, 0, 0, 0, 254, 198, 198, 6, 12, 24
   \            CCCC7800
   \            0000FEC6
   \            C6060C18
   \   00011C   30303000     DB 48, 48, 48, 0, 0, 0, 120, 204, 204, 236, 120, 220, 204, 204, 120, 0
   \            000078CC
   \            CCEC78DC
   \            CCCC7800
   \   00012C   000078CC     DB 0, 0, 120, 204, 204, 204, 124, 24, 24, 48, 112, 0, 0, 0, 0, 0, 56
   \            CCCC7C18
   \            18307000
   \            00000000
   \            38      
   \   00013D   38000038     DB 56, 0, 0, 56, 56, 0, 0, 0, 0, 0, 0, 56, 56, 0, 0, 56, 56, 24, 48, 0
   \            38000000
   \            00000038
   \            38000038
   \            38183000
   \   000151   000C1830     DB 0, 12, 24, 48, 96, 192, 96, 48, 24, 12, 0, 0, 0, 0, 0, 0, 126, 0
   \            60C06030
   \            180C0000
   \            00000000
   \            7E00    
   \   000163   7E000000     DB 126, 0, 0, 0, 0, 0, 0, 96, 48, 24, 12, 6, 12, 24, 48, 96, 0, 0, 0
   \            00000060
   \            30180C06
   \            0C183060
   \            000000  
   \   000176   78CC0C18     DB 120, 204, 12, 24, 48, 48, 0, 48, 48, 0, 0, 0, 124, 198, 198, 222
   \            30300030
   \            30000000
   \            7CC6C6DE
   \   000186   DEDEC0C0     DB 222, 222, 192, 192, 124, 0, 0, 0, 48, 120, 204, 204, 204, 252, 204
   \            7C000000
   \            3078CCCC
   \            CCFCCC  
   \   000195   CCCC0000     DB 204, 204, 0, 0, 0, 252, 102, 102, 102, 124, 102, 102, 102, 252, 0, 0
   \            00FC6666
   \            667C6666
   \            66FC0000
   \   0001A5   003C66C6     DB 0, 60, 102, 198, 192, 192, 192, 198, 102, 60, 0, 0, 0, 248, 108, 102
   \            C0C0C0C6
   \            663C0000
   \            00F86C66
   \   0001B5   66666666     DB 102, 102, 102, 102, 108, 248, 0, 0, 0, 254, 98, 96, 100, 124, 100
   \            6CF80000
   \            00FE6260
   \            647C64  
   \   0001C4   6062FE00     DB 96, 98, 254, 0, 0, 0, 254, 102, 98, 100, 124, 100, 96, 96, 240, 0, 0
   \            0000FE66
   \            62647C64
   \            6060F000
   \            00      
   \   0001D5   003C66C6     DB 0, 60, 102, 198, 192, 192, 206, 198, 102, 62, 0, 0, 0, 204, 204, 204
   \            C0C0CEC6
   \            663E0000
   \            00CCCCCC
   \   0001E5   CCFCCCCC     DB 204, 252, 204, 204, 204, 204, 0, 0, 0, 120, 48, 48, 48, 48, 48, 48
   \            CCCC0000
   \            00783030
   \            30303030
   \   0001F5   30780000     DB 48, 120, 0, 0, 0, 30, 12, 12, 12, 12, 204, 204, 204, 120, 0, 0, 0
   \            001E0C0C
   \            0C0CCCCC
   \            CC780000
   \            00      
   \   000206   E6666C6C     DB 230, 102, 108, 108, 120, 108, 108, 102, 230, 0, 0, 0, 240, 96, 96
   \            786C6C66
   \            E6000000
   \            F06060  
   \   000215   60606266     DB 96, 96, 98, 102, 102, 254, 0, 0, 0, 198, 238, 254, 254, 214, 198
   \            66FE0000
   \            00C6EEFE
   \            FED6C6  
   \   000224   C6C6C600     DB 198, 198, 198, 0, 0, 0, 198, 198, 230, 246, 254, 222, 206, 198, 198
   \            0000C6C6
   \            E6F6FEDE
   \            CEC6C6  
   \   000233   00000038     DB 0, 0, 0, 56, 108, 198, 198, 198, 198, 198, 108, 56, 0, 0, 0, 252
   \            6CC6C6C6
   \            C6C66C38
   \            000000FC
   \   000243   6666667C     DB 102, 102, 102, 124, 96, 96, 96, 240, 0, 0, 0, 56, 108, 198, 198, 198
   \            606060F0
   \            00000038
   \            6CC6C6C6
   \   000253   CEDE7C0C     DB 206, 222, 124, 12, 30, 0, 0, 252, 102, 102, 102, 124, 108, 102, 102
   \            1E0000FC
   \            6666667C
   \            6C6666  
   \   000262   E6000000     DB 230, 0, 0, 0, 120, 204, 204, 192, 112, 24, 204, 204, 120, 0, 0, 0
   \            78CCCCC0
   \            7018CCCC
   \            78000000
   \   000272   FCB43030     DB 252, 180, 48, 48, 48, 48, 48, 48, 120, 0, 0, 0, 204, 204, 204, 204
   \            30303030
   \            78000000
   \            CCCCCCCC
   \   000282   CCCCCCCC     DB 204, 204, 204, 204, 120, 0, 0, 0, 204, 204, 204, 204, 204, 204, 204
   \            78000000
   \            CCCCCCCC
   \            CCCCCC  
   \   000291   78300000     DB 120, 48, 0, 0, 0, 198, 198, 198, 198, 214, 214, 108, 108, 108, 0, 0
   \            00C6C6C6
   \            C6D6D66C
   \            6C6C0000
   \   0002A1   00CCCCCC     DB 0, 204, 204, 204, 120, 48, 120, 204, 204, 204, 0, 0, 0, 204, 204
   \            783078CC
   \            CCCC0000
   \            00CCCC  
   \   0002B0   CCCC7830     DB 204, 204, 120, 48, 48, 48, 120, 0, 0, 0, 254, 206, 152, 24, 48, 96
   \            30307800
   \            0000FECE
   \            98183060
   \   0002C0   62C6FE00     DB 98, 198, 254, 0, 0, 0, 60, 48, 48, 48, 48, 48, 48, 48, 60, 0, 0, 0
   \            00003C30
   \            30303030
   \            30303C00
   \            0000    
   \   0002D2   0080C060     DB 0, 128, 192, 96, 48, 24, 12, 6, 2, 0, 0, 0, 60, 12, 12, 12, 12, 12
   \            30180C06
   \            02000000
   \            3C0C0C0C
   \            0C0C    
   \   0002E4   0C0C3C00     DB 12, 12, 60, 0, 0, 16, 56, 108, 198, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0
   \            0010386C
   \            C6000000
   \            00000000
   \            00000000
   \   0002F8   00000000     DB 0, 0, 0, 0, 0, 0, 0, 255, 0, 48, 48, 24, 0, 0, 0, 0, 0, 0, 0, 0, 0
   \            000000FF
   \            00303018
   \            00000000
   \            00000000
   \            00      
   \   00030D   00000000     DB 0, 0, 0, 0, 120, 12, 124, 204, 204, 118, 0, 0, 0, 224, 96, 96, 124
   \            780C7CCC
   \            CC760000
   \            00E06060
   \            7C      
   \   00031E   66666666     DB 102, 102, 102, 102, 220, 0, 0, 0, 0, 0, 0, 120, 204, 192, 192, 204
   \            DC000000
   \            00000078
   \            CCC0C0CC
   \   00032E   78000000     DB 120, 0, 0, 0, 28, 12, 12, 124, 204, 204, 204, 204, 118, 0, 0, 0, 0
   \            1C0C0C7C
   \            CCCCCCCC
   \            76000000
   \            00      
   \   00033F   000078CC     DB 0, 0, 120, 204, 252, 192, 204, 120, 0, 0, 0, 56, 108, 96, 96, 248
   \            FCC0CC78
   \            00000038
   \            6C6060F8
   \   00034F   606060F0     DB 96, 96, 96, 240, 0, 0, 0, 0, 0, 118, 204, 204, 204, 124, 12, 204
   \            00000000
   \            0076CCCC
   \            CC7C0CCC
   \   00035F   780000E0     DB 120, 0, 0, 224, 96, 96, 108, 118, 102, 102, 102, 230, 0, 0, 0, 24
   \            60606C76
   \            666666E6
   \            00000018
   \   00036F   18007818     DB 24, 0, 120, 24, 24, 24, 24, 126, 0, 0, 12, 12, 0, 60, 12, 12, 12, 12
   \            1818187E
   \            00000C0C
   \            003C0C0C
   \            0C0C    
   \   000381   CCCC7800     DB 204, 204, 120, 0, 0, 224, 96, 96, 102, 108, 120, 108, 102, 230, 0, 0
   \            00E06060
   \            666C786C
   \            66E60000
   \   000391   00781818     DB 0, 120, 24, 24, 24, 24, 24, 24, 24, 126, 0, 0, 0, 0, 0, 0, 252, 214
   \            18181818
   \            187E0000
   \            00000000
   \            FCD6    
   \   0003A3   D6D6D6C6     DB 214, 214, 214, 198, 0, 0, 0, 0, 0, 0, 248, 204, 204, 204, 204, 204
   \            00000000
   \            0000F8CC
   \            CCCCCCCC
   \   0003B3   00000000     DB 0, 0, 0, 0, 0, 0, 120, 204, 204, 204, 204, 120, 0, 0, 0, 0, 0, 220
   \            000078CC
   \            CCCCCC78
   \            00000000
   \            00DC    
   \   0003C5   6666667C     DB 102, 102, 102, 124, 96, 96, 224, 0, 0, 0, 0, 124, 204, 204, 204, 124
   \            6060E000
   \            0000007C
   \            CCCCCC7C
   \   0003D5   0C0C0600     DB 12, 12, 6, 0, 0, 0, 0, 0, 236, 110, 118, 96, 96, 240, 0, 0, 0, 0, 0
   \            00000000
   \            EC6E7660
   \            60F00000
   \            000000  
   \   0003E8   0078CC60     DB 0, 120, 204, 96, 24, 204, 120, 0, 0, 0, 0, 32, 96, 252, 96, 96, 96
   \            18CC7800
   \            00000020
   \            60FC6060
   \            60      
   \   0003F9   6C380000     DB 108, 56, 0, 0, 0, 0, 0, 0, 204, 204, 204, 204, 204, 118, 0, 0, 0, 0
   \            00000000
   \            CCCCCCCC
   \            CC760000
   \            0000    
   \   00040B   0000CCCC     DB 0, 0, 204, 204, 204, 204, 120, 48, 0, 0, 0, 0, 0, 0, 198, 198, 214
   \            CCCC7830
   \            00000000
   \            0000C6C6
   \            D6      
   \   00041C   D66C6C00     DB 214, 108, 108, 0, 0, 0, 0, 0, 0, 198, 108, 56, 56, 108, 198, 0, 0, 0
   \            00000000
   \            00C66C38
   \            386CC600
   \            0000    
   \   00042E   00000066     DB 0, 0, 0, 102, 102, 102, 102, 60, 12, 24, 0, 0, 0, 0, 0, 252, 140, 24
   \            6666663C
   \            0C180000
   \            000000FC
   \            8C18    
   \   000440   60C4FC00     DB 96, 196, 252, 0, 0, 0, 28, 48, 48, 96, 192, 96, 48, 48, 28, 0, 0, 0
   \            00001C30
   \            3060C060
   \            30301C00
   \            0000    
   \   000452   18181818     DB 24, 24, 24, 24, 0, 24, 24, 24, 24, 0, 0, 0, 224, 48, 48, 24, 12, 24
   \            00181818
   \            18000000
   \            E0303018
   \            0C18    
   \   000464   3030E000     DB 48, 48, 224, 0, 0, 0, 115, 218, 206, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0
   \            000073DA
   \            CE000000
   \            00000000
   \            00000000
   \   000478   10386CC6     DB 16, 56, 108, 198, 198, 254, 0, 0
   \            C6FE0000
     85          {
     86          0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,/*""=00H*/ 
     87          0x00,0x30,0x78,0x78,0x78,0x30,0x30,0x00,0x30,0x30,0x00,0x00,/*"!"=01H*/
     88          0x00,0x00,0x66,0x66,0x66,0x24,0x00,0x00,0x00,0x00,0x00,0x00,/*"""=02h*/
     89          0x00,0x00,0x6c,0x6c,0xfe,0x6c,0x6c,0x6c,0xfe,0x6c,0x6c,0x00,/*"#"=03h*/
     90          0x00,0x30,0x30,0x7c,0xc0,0xc0,0x78,0x0c,0x0c,0xf8,0x30,0x30,/*"$"=04h*/
     91          0x00,0x00,0x00,0x00,0xc4,0xcc,0x18,0x30,0x60,0xcc,0x8c,0x00,/*"%"=05h*/
     92          0x00,0x00,0x70,0xd8,0xd8,0x70,0xfa,0xde,0xcc,0xdc,0x76,0x00,/*"&"=06h*/
     93          0x00,0x00,0x30,0x30,0x30,0x60,0x00,0x00,0x00,0x00,0x00,0x00,/*"'"=07h*/
     94          0x00,0x00,0x0c,0x18,0x30,0x60,0x60,0x60,0x30,0x18,0x0c,0x00,/*"("=08h*/
     95          0x00,0x00,0x60,0x30,0x18,0x0c,0x0c,0x0c,0x18,0x30,0x60,0x00,/*")"=09h*/
     96          0x00,0x00,0x00,0x00,0x66,0x3c,0xff,0x3c,0x66,0x00,0x00,0x00,/*"*"=0Ah*/
     97          0x00,0x00,0x00,0x00,0x18,0x18,0x7e,0x18,0x18,0x00,0x00,0x00,/*"+"=0Bh*/
     98          0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x38,0x38,0x60,/*";"=0Ch*/
     99          0x00,0x00,0x00,0x00,0x00,0x00,0xfe,0x00,0x00,0x00,0x00,0x00,/*"-"=0Dh*/
    100          0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x38,0x38,0x00,/*"."=0Eh*/
    101          0x00,0x00,0x00,0x02,0x06,0x0c,0x18,0x30,0x60,0xc0,0x80,0x00,/*"/"=0Fh*/
    102          0x00,0x00,0x7c,0xc6,0xce,0xde,0xd6,0xf6,0xe6,0xc6,0x7c,0x00,/*"0"=10h*/
    103          0x00,0x00,0x10,0x30,0xf0,0x30,0x30,0x30,0x30,0x30,0xfc,0x00,/*"1"=11h*/
    104          0x00,0x00,0x78,0xcc,0xcc,0x0c,0x18,0x30,0x60,0xcc,0xfc,0x00,/*"2"=12h*/
    105          0x00,0x00,0x78,0xcc,0x0c,0x0c,0x38,0x0c,0x0c,0xcc,0x78,0x00,/*"3"=13h*/
    106          0x00,0x00,0x0c,0x1c,0x3c,0x6c,0xcc,0xfe,0x0c,0x0c,0x1e,0x00,/*"4"=14h*/
    107          0x00,0x00,0xfc,0xc0,0xc0,0xc0,0xf8,0x0c,0x0c,0xcc,0x78,0x00,/*"5"=15h*/
    108          0x00,0x00,0x38,0x60,0xc0,0xc0,0xf8,0xcc,0xcc,0xcc,0x78,0x00,/*"6"=16h*/
    109          0x00,0x00,0xfe,0xc6,0xc6,0x06,0x0c,0x18,0x30,0x30,0x30,0x00,/*"7"=17h*/
    110          0x00,0x00,0x78,0xcc,0xcc,0xec,0x78,0xdc,0xcc,0xcc,0x78,0x00,/*"8"=18h*/
    111          0x00,0x00,0x78,0xcc,0xcc,0xcc,0x7c,0x18,0x18,0x30,0x70,0x00,/*"9"=19h*/
    112          0x00,0x00,0x00,0x00,0x38,0x38,0x00,0x00,0x38,0x38,0x00,0x00,/*":"=1Ah*/
    113          0x00,0x00,0x00,0x00,0x38,0x38,0x00,0x00,0x38,0x38,0x18,0x30,/*";"=1Bh*/
    114          0x00,0x00,0x0c,0x18,0x30,0x60,0xc0,0x60,0x30,0x18,0x0c,0x00,/*"<"=1Ch*/
    115          0x00,0x00,0x00,0x00,0x00,0x7e,0x00,0x7e,0x00,0x00,0x00,0x00,/*"="=1Dh*/
    116          0x00,0x00,0x60,0x30,0x18,0x0c,0x06,0x0c,0x18,0x30,0x60,0x00,/*">"=1Eh*/
    117          0x00,0x00,0x78,0xcc,0x0c,0x18,0x30,0x30,0x00,0x30,0x30,0x00,/*"?"=1Fh*/
    118          0x00,0x00,0x7c,0xc6,0xc6,0xde,0xde,0xde,0xc0,0xc0,0x7c,0x00,/*"@"=20h*/
    119          0x00,0x00,0x30,0x78,0xcc,0xcc,0xcc,0xfc,0xcc,0xcc,0xcc,0x00,/*"A"=21h*/
    120          0x00,0x00,0xfc,0x66,0x66,0x66,0x7c,0x66,0x66,0x66,0xfc,0x00,/*"B"=22h*/
    121          0x00,0x00,0x3c,0x66,0xc6,0xc0,0xc0,0xc0,0xc6,0x66,0x3c,0x00,/*"C"=23h*/
    122          0x00,0x00,0xf8,0x6c,0x66,0x66,0x66,0x66,0x66,0x6c,0xf8,0x00,/*"D"=24h*/
    123          0x00,0x00,0xfe,0x62,0x60,0x64,0x7c,0x64,0x60,0x62,0xfe,0x00,/*"E"=25h*/
    124          0x00,0x00,0xfe,0x66,0x62,0x64,0x7c,0x64,0x60,0x60,0xf0,0x00,/*"F"=26h*/
    125          0x00,0x00,0x3c,0x66,0xc6,0xc0,0xc0,0xce,0xc6,0x66,0x3e,0x00,/*"G"=27h*/
    126          0x00,0x00,0xcc,0xcc,0xcc,0xcc,0xfc,0xcc,0xcc,0xcc,0xcc,0x00,/*"h"=28h*/
    127          0x00,0x00,0x78,0x30,0x30,0x30,0x30,0x30,0x30,0x30,0x78,0x00,/*"I"=29h*/
    128          0x00,0x00,0x1e,0x0c,0x0c,0x0c,0x0c,0xcc,0xcc,0xcc,0x78,0x00,/*"J"=2Ah*/
    129          0x00,0x00,0xe6,0x66,0x6c,0x6c,0x78,0x6c,0x6c,0x66,0xe6,0x00,/*"K"=2Bh*/
    130          0x00,0x00,0xf0,0x60,0x60,0x60,0x60,0x62,0x66,0x66,0xfe,0x00,/*"L"=2Ch*/
    131          0x00,0x00,0xc6,0xee,0xfe,0xfe,0xd6,0xc6,0xc6,0xc6,0xc6,0x00,/*"M"=2Dh*/
    132          0x00,0x00,0xc6,0xc6,0xe6,0xf6,0xfe,0xde,0xce,0xc6,0xc6,0x00,/*"N"=2Eh*/
    133          0x00,0x00,0x38,0x6c,0xc6,0xc6,0xc6,0xc6,0xc6,0x6c,0x38,0x00,/*"O"=2Fh*/
    134          0x00,0x00,0xfc,0x66,0x66,0x66,0x7c,0x60,0x60,0x60,0xf0,0x00,/*"P"=30h*/
    135          0x00,0x00,0x38,0x6c,0xc6,0xc6,0xc6,0xce,0xde,0x7c,0x0c,0x1e,/*"Q"=31h*/
    136          0x00,0x00,0xfc,0x66,0x66,0x66,0x7c,0x6c,0x66,0x66,0xe6,0x00,/*"R"=32h*/
    137          0x00,0x00,0x78,0xcc,0xcc,0xc0,0x70,0x18,0xcc,0xcc,0x78,0x00,/*"S"=33h*/
    138          0x00,0x00,0xfc,0xb4,0x30,0x30,0x30,0x30,0x30,0x30,0x78,0x00,/*"T"=34h*/
    139          0x00,0x00,0xcc,0xcc,0xcc,0xcc,0xcc,0xcc,0xcc,0xcc,0x78,0x00,/*"U"=35h*/
    140          0x00,0x00,0xcc,0xcc,0xcc,0xcc,0xcc,0xcc,0xcc,0x78,0x30,0x00,/*"V"=36h*/
    141          0x00,0x00,0xc6,0xc6,0xc6,0xc6,0xd6,0xd6,0x6c,0x6c,0x6c,0x00,/*"W"=37h*/
    142          0x00,0x00,0xcc,0xcc,0xcc,0x78,0x30,0x78,0xcc,0xcc,0xcc,0x00,/*"X"=38h*/
    143          0x00,0x00,0xcc,0xcc,0xcc,0xcc,0x78,0x30,0x30,0x30,0x78,0x00,/*"Y"=39h*/
    144          0x00,0x00,0xfe,0xce,0x98,0x18,0x30,0x60,0x62,0xc6,0xfe,0x00,/*"Z"=3Ah*/
    145          0x00,0x00,0x3c,0x30,0x30,0x30,0x30,0x30,0x30,0x30,0x3c,0x00,/*"["=3Bh*/
    146          0x00,0x00,0x00,0x80,0xc0,0x60,0x30,0x18,0x0c,0x06,0x02,0x00,/*"\"=3Ch*/
    147          0x00,0x00,0x3c,0x0c,0x0c,0x0c,0x0c,0x0c,0x0c,0x0c,0x3c,0x00,/*"]"=3Dh*/
    148          0x00,0x10,0x38,0x6c,0xc6,0x00,0x00,0x00,0x00,0x00,0x00,0x00,/*"^"=3Eh*/
    149          0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xff,/*"_"=3Fh*/
    150          0x00,0x30,0x30,0x18,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,/*"`"=40h*/
    151          0x00,0x00,0x00,0x00,0x00,0x78,0x0c,0x7c,0xcc,0xcc,0x76,0x00,/*"a"=41h*/
    152          0x00,0x00,0xe0,0x60,0x60,0x7c,0x66,0x66,0x66,0x66,0xdc,0x00,/*"b"=42h*/
    153          0x00,0x00,0x00,0x00,0x00,0x78,0xcc,0xc0,0xc0,0xcc,0x78,0x00,/*"c"=43h*/
    154          0x00,0x00,0x1c,0x0c,0x0c,0x7c,0xcc,0xcc,0xcc,0xcc,0x76,0x00,/*"d"=44h*/
    155          0x00,0x00,0x00,0x00,0x00,0x78,0xcc,0xfc,0xc0,0xcc,0x78,0x00,/*"e"=45h*/
    156          0x00,0x00,0x38,0x6c,0x60,0x60,0xf8,0x60,0x60,0x60,0xf0,0x00,/*"f"=46h*/
    157          0x00,0x00,0x00,0x00,0x76,0xcc,0xcc,0xcc,0x7c,0x0c,0xcc,0x78,/*"g"=47h*/
    158          0x00,0x00,0xe0,0x60,0x60,0x6c,0x76,0x66,0x66,0x66,0xe6,0x00,/*"h"=48h*/
    159          0x00,0x00,0x18,0x18,0x00,0x78,0x18,0x18,0x18,0x18,0x7e,0x00,/*"i"=49h*/
    160          0x00,0x0c,0x0c,0x00,0x3c,0x0c,0x0c,0x0c,0x0c,0xcc,0xcc,0x78,/*"j"=4Ah*/
    161          0x00,0x00,0xe0,0x60,0x60,0x66,0x6c,0x78,0x6c,0x66,0xe6,0x00,/*"k"=4Bh*/
    162          0x00,0x00,0x78,0x18,0x18,0x18,0x18,0x18,0x18,0x18,0x7e,0x00,/*"l"=4Ch*/
    163          0x00,0x00,0x00,0x00,0x00,0xfc,0xd6,0xd6,0xd6,0xd6,0xc6,0x00,/*"m"=4Dh*/
    164          0x00,0x00,0x00,0x00,0x00,0xf8,0xcc,0xcc,0xcc,0xcc,0xcc,0x00,/*"n"=4Eh*/
    165          0x00,0x00,0x00,0x00,0x00,0x78,0xcc,0xcc,0xcc,0xcc,0x78,0x00,/*"o'=4Fh*/
    166          0x00,0x00,0x00,0x00,0xdc,0x66,0x66,0x66,0x7c,0x60,0x60,0xe0,/*"p"=50h*/
    167          0x00,0x00,0x00,0x00,0x7c,0xcc,0xcc,0xcc,0x7c,0x0c,0x0c,0x06,/*"q"=51h*/
    168          0x00,0x00,0x00,0x00,0x00,0xec,0x6e,0x76,0x60,0x60,0xf0,0x00,/*"r"=52h*/
    169          0x00,0x00,0x00,0x00,0x00,0x78,0xcc,0x60,0x18,0xcc,0x78,0x00,/*"s"=53h*/
    170          0x00,0x00,0x00,0x20,0x60,0xfc,0x60,0x60,0x60,0x6c,0x38,0x00,/*"t"=54h*/
    171          0x00,0x00,0x00,0x00,0x00,0xcc,0xcc,0xcc,0xcc,0xcc,0x76,0x00,/*"u"=55h*/
    172          0x00,0x00,0x00,0x00,0x00,0xcc,0xcc,0xcc,0xcc,0x78,0x30,0x00,/*"v"=56h*/
    173          0x00,0x00,0x00,0x00,0x00,0xc6,0xc6,0xd6,0xd6,0x6c,0x6c,0x00,/*"w"=57h*/
    174          0x00,0x00,0x00,0x00,0x00,0xc6,0x6c,0x38,0x38,0x6c,0xc6,0x00,/*"x"=58h*/
    175          0x00,0x00,0x00,0x00,0x00,0x66,0x66,0x66,0x66,0x3c,0x0c,0x18,/*"y"=59h*/
    176          0x00,0x00,0x00,0x00,0x00,0xfc,0x8c,0x18,0x60,0xc4,0xfc,0x00,/*"z"=5Ah*/
    177          0x00,0x00,0x1c,0x30,0x30,0x60,0xc0,0x60,0x30,0x30,0x1c,0x00,/*"{"=5Bh*/
    178          0x00,0x00,0x18,0x18,0x18,0x18,0x00,0x18,0x18,0x18,0x18,0x00,/*"|"=5Ch*/
    179          0x00,0x00,0xe0,0x30,0x30,0x18,0x0c,0x18,0x30,0x30,0xe0,0x00,/*"}"=5Dh*/
    180          0x00,0x00,0x73,0xda,0xce,0x00,0x00,0x00,0x00,0x00,0x00,0x00,           
    181          0x00,0x00,0x00,0x00,0x10,0x38,0x6c,0xc6,0xc6,0xfe,0x00,0x00,/*"~"=5Fh*/
    182          };
    183           
    184          /* LCD Control lines */
    185          #define HAL_LCD_MODE_PORT 0
    186          #define HAL_LCD_MODE_PIN  0
    187          
    188          #define HAL_LCD_RESET_PORT 1
    189          #define HAL_LCD_RESET_PIN  1
    190          
    191          #define HAL_LCD_CS_PORT 1
    192          #define HAL_LCD_CS_PIN  2
    193          
    194          /* LCD SPI lines */
    195          #define HAL_LCD_CLK_PORT 1
    196          #define HAL_LCD_CLK_PIN  5
    197          
    198          #define HAL_LCD_MOSI_PORT 1
    199          #define HAL_LCD_MOSI_PIN  6
    200          
    201          
    202          /* LCD backlight control pin */
    203          #define HAL_LCD_BK_PORT 0
    204          #define HAL_LCD_BK_PIN  7
    205          
    206          /* SPI settings */
    207          #define HAL_SPI_CLOCK_POL_LO       0x00
    208          #define HAL_SPI_CLOCK_PHA_0        0x00
    209          #define HAL_SPI_TRANSFER_MSB_FIRST 0x20
    210          
    211          /* LCD lines */
    212          #define LCD_MAX_LINE_COUNT              3
    213          #define LCD_MAX_LINE_LENGTH             16
    214          #define LCD_MAX_BUF                     25
    215          
    216          /* Defines for HW LCD */
    217          
    218          /**************************************************************************************************
    219           *                                           MACROS
    220           **************************************************************************************************/
    221          
    222          #define HAL_IO_SET(port, pin, val)        HAL_IO_SET_PREP(port, pin, val)
    223          #define HAL_IO_SET_PREP(port, pin, val)   st( P##port##_##pin## = val; )
    224          
    225          #define HAL_CONFIG_IO_OUTPUT(port, pin, val)      HAL_CONFIG_IO_OUTPUT_PREP(port, pin, val)
    226          #define HAL_CONFIG_IO_OUTPUT_PREP(port, pin, val) st( P##port##SEL &= ~BV(pin); \
    227                                                                P##port##_##pin## = val; \
    228                                                                P##port##DIR |= BV(pin); )
    229          
    230          #define HAL_CONFIG_IO_PERIPHERAL(port, pin)      HAL_CONFIG_IO_PERIPHERAL_PREP(port, pin)
    231          #define HAL_CONFIG_IO_PERIPHERAL_PREP(port, pin) st( P##port##SEL |= BV(pin); )
    232          
    233          
    234          
    235          /* SPI interface control */
    236          #define LCD_SPI_BEGIN()     HAL_IO_SET(HAL_LCD_CS_PORT,  HAL_LCD_CS_PIN,  0); /* chip select */
    237          #define LCD_SPI_END()                                                         \
    238          {                                                                             \
    239            asm("NOP");                                                                 \
    240            asm("NOP");                                                                 \
    241            asm("NOP");                                                                 \
    242            asm("NOP");                                                                 \
    243            HAL_IO_SET(HAL_LCD_CS_PORT,  HAL_LCD_CS_PIN,  1); /* chip select */         \
    244          }
    245          /* clear the received and transmit byte status, write tx data to buffer, wait till transmit done */
    246          #define LCD_SPI_TX(x)                   { U1CSR &= ~(BV(2) | BV(1)); U1DBUF = x; while( !(U1CSR & BV(1)) ); }
    247          #define LCD_SPI_WAIT_RXRDY()            { while(!(U1CSR & BV(1))); }
    248          
    249          
    250          /* Control macros */
    251          #define LCD_DO_WRITE()        HAL_IO_SET(HAL_LCD_MODE_PORT,  HAL_LCD_MODE_PIN,  1);
    252          #define LCD_DO_CONTROL()      HAL_IO_SET(HAL_LCD_MODE_PORT,  HAL_LCD_MODE_PIN,  0);
    253          
    254          #define LCD_ACTIVATE_RESET()  HAL_IO_SET(HAL_LCD_RESET_PORT, HAL_LCD_RESET_PIN, 0);
    255          #define LCD_RELEASE_RESET()   HAL_IO_SET(HAL_LCD_RESET_PORT, HAL_LCD_RESET_PIN, 1);
    256          
    257          #define CONTRAST_CTRL_REGISTER          0x81
    258          
    259          /**************************************************************************************************
    260           *                                       GLOBAL VARIABLES
    261           **************************************************************************************************/

   \                                 In  segment XDATA_Z, align 1, keep-with-next
    262          static uint8 *Lcd_Line1;
   \                     Lcd_Line1:
   \   000000                DS 2
   \   000002                REQUIRE __INIT_XDATA_Z
    263          
    264          /**************************************************************************************************
    265           *                                       FUNCTIONS - API
    266           **************************************************************************************************/
    267          #if (HAL_LCD == TRUE)
    268          void HalLcd_HW_Init(void);
    269          void HalLcd_HW_WaitUs(uint16 i);
    270          void HalLcd_HW_Clear(void);
    271          void HalLcd_HW_Control(uint8 cmd);
    272          void HalLcd_HW_Write(uint8 data);
    273          void HalLcd_HW_SetContrast(uint8 value);
    274          void HalLcd_HW_WriteChar(uint8 line, uint8 col, char text);
    275          void HalLcd_HW_WriteLine(uint8 line, const char *pText);
    276          void SET_DDRAM_ADDR(uint8 x, uint8 y);
    277          uint8 HalLcd_Convert_DZK(uint8 index, uint16 addr);
    278          
    279          #endif //LCD
    280          
    281          /**************************************************************************************************
    282           * @fn      HalLcdInit
    283           *
    284           * @brief   Initilize LCD Service
    285           *
    286           * @param   init - pointer to void that contains the initialized value
    287           *
    288           * @return  None
    289           **************************************************************************************************/

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    290          void HalLcdInit(void)
   \                     HalLcdInit:
    291          {
   \   000000   C082         PUSH    DPL
   \   000002   C083         PUSH    DPH
   \   000004                ; Saved register size: 2
   \   000004                ; Auto size: 0
    292            Lcd_Line1 = NULL;
   \   000004   90....       MOV     DPTR,#Lcd_Line1
   \   000007   E4           CLR     A
   \   000008   F0           MOVX    @DPTR,A
   \   000009   A3           INC     DPTR
   \   00000A   F0           MOVX    @DPTR,A
    293          #if (HAL_LCD == TRUE)
    294            HalLcd_HW_Init();
   \   00000B                ; Setup parameters for call to function HalLcd_HW_Init
   \   00000B   12....       LCALL   ??HalLcd_HW_Init?relay
    295          #endif
    296          }
   \   00000E                REQUIRE ?Subroutine7
   \   00000E                ; // Fall through to label ?Subroutine7

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine7:
   \   000000   D083         POP     DPH
   \   000002   D082         POP     DPL
   \   000004   02....       LJMP    ?BRET
    297          
    298          /*************************************************************************************************
    299           *                    LCD EMULATION FUNCTIONS
    300           *
    301           * Some evaluation boards are equipped with Liquid Crystal Displays
    302           * (LCD) which may be used to display diagnostic information. These
    303           * functions provide LCD emulation, sending the diagnostic strings
    304           * to Z-Tool via the RS232 serial port. These functions are enabled
    305           * when the "LCD_SUPPORTED" compiler flag is placed in the makefile.
    306           *
    307           * Most applications update both lines (1 and 2) of the LCD whenever
    308           * text is posted to the device. This emulator assumes that line 1 is
    309           * updated first (saved locally) and the formatting and send operation
    310           * is triggered by receipt of line 2. Nothing will be transmitted if
    311           * only line 1 is updated.
    312           *
    313           *************************************************************************************************/
    314          

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    315          void SET_DDRAM_ADDR(uint8 x, uint8 y)
   \                     SET_DDRAM_ADDR:
    316          {
   \   000000   74F7         MOV     A,#-0x9
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 9
   \   000005                ; Auto size: 0
   \   000005   E9           MOV     A,R1
   \   000006   FE           MOV     R6,A
    317          	HalLcd_HW_Control(y|0xb0);
   \   000007                ; Setup parameters for call to function HalLcd_HW_Control
   \   000007   74B0         MOV     A,#-0x50
   \   000009   4A           ORL     A,R2
   \   00000A   F9           MOV     R1,A
   \   00000B   12....       LCALL   ??HalLcd_HW_Control?relay
    318          	HalLcd_HW_Control((x >> 4)|0x10);
   \   00000E                ; Setup parameters for call to function HalLcd_HW_Control
   \   00000E   EE           MOV     A,R6
   \   00000F   C4           SWAP    A
   \   000010   540F         ANL     A,#0xf
   \   000012   4410         ORL     A,#0x10
   \   000014   F9           MOV     R1,A
   \   000015   12....       LCALL   ??HalLcd_HW_Control?relay
    319          	HalLcd_HW_Control(x&0x0f);
   \   000018                ; Setup parameters for call to function HalLcd_HW_Control
   \   000018   740F         MOV     A,#0xf
   \   00001A   5E           ANL     A,R6
   \   00001B   02....       LJMP    ?Subroutine8 & 0xFFFF
    320          }

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine8:
   \   000000   F9           MOV     R1,A
   \   000001   12....       LCALL   ??HalLcd_HW_Control?relay
   \   000004                REQUIRE ??Subroutine11_0
   \   000004                ; // Fall through to label ??Subroutine11_0

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ??Subroutine11_0:
   \   000000   7F01         MOV     R7,#0x1
   \   000002   02....       LJMP    ?BANKED_LEAVE_XDATA
    321          
    322          /**************************************************************************************************
    323           * @fn      HalLcdWriteString
    324           *
    325           * @brief   Write a string to the LCD
    326           *
    327           * @param   str    - pointer to the string that will be displayed
    328           *          option - display options
    329           *
    330           * @return  None
    331           **************************************************************************************************/

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    332          void HalLcdWriteString ( char *str, uint8 option)
   \                     HalLcdWriteString:
    333          {
   \   000000   74E8         MOV     A,#-0x18
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 24
   \   000005                ; Auto size: 0
   \   000005   8A..         MOV     ?V0 + 14,R2
   \   000007   8B..         MOV     ?V0 + 15,R3
   \   000009   89..         MOV     ?V0 + 3,R1
    334          #if (HAL_LCD == TRUE)
    335          
    336            uint8 strLen = 0;
    337            uint8 totalLen = 0;
    338            uint8 *buf;
    339            uint8 tmpLen;
    340          
    341            if ( Lcd_Line1 == NULL )
   \   00000B   90....       MOV     DPTR,#Lcd_Line1
   \   00000E   E0           MOVX    A,@DPTR
   \   00000F   7002         JNZ     ??HalLcdWriteString_0
   \   000011   A3           INC     DPTR
   \   000012   E0           MOVX    A,@DPTR
   \                     ??HalLcdWriteString_0:
   \   000013   7018         JNZ     ??HalLcdWriteString_1
    342            {
    343              Lcd_Line1 = osal_mem_alloc( HAL_LCD_MAX_CHARS+1 );
   \   000015                ; Setup parameters for call to function osal_mem_alloc
   \   000015   7A11         MOV     R2,#0x11
   \   000017   7B00         MOV     R3,#0x0
   \   000019   12....       LCALL   ??osal_mem_alloc?relay
   \   00001C   90....       MOV     DPTR,#Lcd_Line1
   \   00001F   EA           MOV     A,R2
   \   000020   F0           MOVX    @DPTR,A
   \   000021   A3           INC     DPTR
   \   000022   EB           MOV     A,R3
   \   000023   F0           MOVX    @DPTR,A
    344              HalLcdWriteString( "TexasInstruments", 1 );
   \   000024                ; Setup parameters for call to function HalLcdWriteString
   \   000024   7901         MOV     R1,#0x1
   \   000026   7A..         MOV     R2,#(`?<Constant "TexasInstruments">` & 0xff)
   \   000028   7B..         MOV     R3,#((`?<Constant "TexasInstruments">` >> 8) & 0xff)
   \   00002A   12....       LCALL   ??HalLcdWriteString?relay
    345            }
    346          
    347            strLen = (uint8)osal_strlen( (char*)str );
   \                     ??HalLcdWriteString_1:
   \   00002D                ; Setup parameters for call to function osal_strlen
   \   00002D   AA..         MOV     R2,?V0 + 14
   \   00002F   AB..         MOV     R3,?V0 + 15
   \   000031   12....       LCALL   ??osal_strlen?relay
   \   000034   EA           MOV     A,R2
   \   000035   F5..         MOV     ?V0 + 4,A
    348          
    349            /* Check boundries */
    350            if ( strLen > HAL_LCD_MAX_CHARS )
   \   000037   C3           CLR     C
   \   000038   9411         SUBB    A,#0x11
   \   00003A   4003         JC      ??HalLcdWriteString_2
    351              strLen = HAL_LCD_MAX_CHARS;
   \   00003C   75..10       MOV     ?V0 + 4,#0x10
    352          
    353            if ( option == HAL_LCD_LINE_1 )
   \                     ??HalLcdWriteString_2:
   \   00003F   85..82       MOV     DPL,?V0 + 4
   \   000042   8582..       MOV     ?V0 + 12,DPL
   \   000045   85....       MOV     ?V0 + 0,?V0 + 14
   \   000048   85....       MOV     ?V0 + 1,?V0 + 15
   \   00004B   75..00       MOV     ?V0 + 2,#0x0
   \   00004E   AE82         MOV     R6,DPL
   \   000050   7401         MOV     A,#0x1
   \   000052   65..         XRL     A,?V0 + 3
   \   000054   702B         JNZ     ??HalLcdWriteString_3
    354            {
    355              /* Line 1 gets saved for later */
    356              osal_memcpy( Lcd_Line1, str, strLen );
   \   000056                ; Setup parameters for call to function osal_memcpy
   \   000056   78..         MOV     R0,#?V0 + 0
   \   000058   12....       LCALL   ?PUSH_XSTACK_I_THREE
   \   00005B   EE           MOV     A,R6
   \   00005C   FC           MOV     R4,A
   \   00005D   7D00         MOV     R5,#0x0
   \   00005F   90....       MOV     DPTR,#Lcd_Line1
   \   000062   E0           MOVX    A,@DPTR
   \   000063   FA           MOV     R2,A
   \   000064   A3           INC     DPTR
   \   000065   E0           MOVX    A,@DPTR
   \   000066   FB           MOV     R3,A
   \   000067   12....       LCALL   ??Subroutine13_0 & 0xFFFF
   \                     ??CrossCallReturnLabel_14:
   \   00006A   12....       LCALL   ?DEALLOC_XSTACK8
    357              Lcd_Line1[strLen] = '\0';
   \   00006D   90....       MOV     DPTR,#Lcd_Line1
   \   000070   E0           MOVX    A,@DPTR
   \   000071   25..         ADD     A,?V0 + 12
   \   000073   FA           MOV     R2,A
   \   000074   A3           INC     DPTR
   \   000075   E0           MOVX    A,@DPTR
   \   000076   3400         ADDC    A,#0x0
   \   000078   8A82         MOV     DPL,R2
   \   00007A   F583         MOV     DPH,A
   \   00007C   E4           CLR     A
   \   00007D   F0           MOVX    @DPTR,A
   \   00007E   02....       LJMP    ??HalLcdWriteString_4 & 0xFFFF
    358            }
    359            else
    360            {
    361              /* Line 2 triggers action */
    362              tmpLen = (uint8)osal_strlen( (char*)Lcd_Line1 );
   \                     ??HalLcdWriteString_3:
   \   000081                ; Setup parameters for call to function osal_strlen
   \   000081   90....       MOV     DPTR,#Lcd_Line1
   \   000084   E0           MOVX    A,@DPTR
   \   000085   FA           MOV     R2,A
   \   000086   A3           INC     DPTR
   \   000087   E0           MOVX    A,@DPTR
   \   000088   FB           MOV     R3,A
   \   000089   12....       LCALL   ??osal_strlen?relay
   \   00008C   EA           MOV     A,R2
   \   00008D   F5..         MOV     ?V0 + 6,A
    363              totalLen =  tmpLen + 1 + strLen + 1;
    364              buf = osal_mem_alloc( totalLen );
   \   00008F                ; Setup parameters for call to function osal_mem_alloc
   \   00008F   EE           MOV     A,R6
   \   000090   25..         ADD     A,?V0 + 6
   \   000092   2402         ADD     A,#0x2
   \   000094   FA           MOV     R2,A
   \   000095   7B00         MOV     R3,#0x0
   \   000097   12....       LCALL   ??osal_mem_alloc?relay
   \   00009A   8A..         MOV     ?V0 + 4,R2
   \   00009C   8B..         MOV     ?V0 + 5,R3
    365              if ( buf != NULL )
   \   00009E   EA           MOV     A,R2
   \   00009F   7001         JNZ     ??HalLcdWriteString_5
   \   0000A1   EB           MOV     A,R3
   \                     ??HalLcdWriteString_5:
   \   0000A2   6067         JZ      ??HalLcdWriteString_4
    366              {
    367                /* Concatenate strings */
    368                osal_memcpy( buf, Lcd_Line1, tmpLen );
   \   0000A4                ; Setup parameters for call to function osal_memcpy
   \   0000A4   90....       MOV     DPTR,#Lcd_Line1
   \   0000A7   E0           MOVX    A,@DPTR
   \   0000A8   F5..         MOV     ?V0 + 8,A
   \   0000AA   A3           INC     DPTR
   \   0000AB   E0           MOVX    A,@DPTR
   \   0000AC   F5..         MOV     ?V0 + 9,A
   \   0000AE   75..00       MOV     ?V0 + 10,#0x0
   \   0000B1   78..         MOV     R0,#?V0 + 8
   \   0000B3   12....       LCALL   ?PUSH_XSTACK_I_THREE
   \   0000B6   AC..         MOV     R4,?V0 + 6
   \   0000B8   7D00         MOV     R5,#0x0
   \   0000BA   12....       LCALL   ??Subroutine13_0 & 0xFFFF
   \                     ??CrossCallReturnLabel_15:
   \   0000BD   12....       LCALL   ?DEALLOC_XSTACK8
    369                buf[tmpLen++] = ' ';
   \   0000C0   85....       MOV     ?V0 + 8,?V0 + 6
   \   0000C3   E5..         MOV     A,?V0 + 4
   \   0000C5   25..         ADD     A,?V0 + 8
   \   0000C7   F582         MOV     DPL,A
   \   0000C9   E5..         MOV     A,?V0 + 5
   \   0000CB   12....       LCALL   ??Subroutine12_0 & 0xFFFF
   \                     ??CrossCallReturnLabel_7:
   \   0000CE   05..         INC     ?V0 + 6
    370                osal_memcpy( &buf[tmpLen], str, strLen );
   \   0000D0                ; Setup parameters for call to function osal_memcpy
   \   0000D0   78..         MOV     R0,#?V0 + 0
   \   0000D2   12....       LCALL   ?PUSH_XSTACK_I_THREE
   \   0000D5   EE           MOV     A,R6
   \   0000D6   FC           MOV     R4,A
   \   0000D7   7D00         MOV     R5,#0x0
   \   0000D9   E5..         MOV     A,?V0 + 4
   \   0000DB   25..         ADD     A,?V0 + 6
   \   0000DD   FA           MOV     R2,A
   \   0000DE   E5..         MOV     A,?V0 + 5
   \   0000E0   3400         ADDC    A,#0x0
   \   0000E2   FB           MOV     R3,A
   \   0000E3   12....       LCALL   ??Subroutine13_0 & 0xFFFF
   \                     ??CrossCallReturnLabel_16:
   \   0000E6   12....       LCALL   ?DEALLOC_XSTACK8
    371                buf[tmpLen+strLen] = '\0';
   \   0000E9   EE           MOV     A,R6
   \   0000EA   25..         ADD     A,?V0 + 6
   \   0000EC   F8           MOV     R0,A
   \   0000ED   E4           CLR     A
   \   0000EE   3400         ADDC    A,#0x0
   \   0000F0   F9           MOV     R1,A
   \   0000F1   E5..         MOV     A,?V0 + 4
   \   0000F3   28           ADD     A,R0
   \   0000F4   F582         MOV     DPL,A
   \   0000F6   E5..         MOV     A,?V0 + 5
   \   0000F8   39           ADDC    A,R1
   \   0000F9   F583         MOV     DPH,A
   \   0000FB   E4           CLR     A
   \   0000FC   F0           MOVX    @DPTR,A
    372          
    373                /* Send it out */
    374          #if defined (ZTOOL_P1) || defined (ZTOOL_P2)
    375          
    376          #if defined(SERIAL_DEBUG_SUPPORTED)
    377                debug_str( (uint8*)buf );
   \   0000FD                ; Setup parameters for call to function debug_str
   \   0000FD   AA..         MOV     R2,?V0 + 4
   \   0000FF   AB..         MOV     R3,?V0 + 5
   \   000101   12....       LCALL   ??debug_str?relay
    378          #endif //LCD_SUPPORTED
    379          
    380          #endif //ZTOOL_P1
    381          
    382                /* Free mem */
    383                osal_mem_free( buf );
   \   000104                ; Setup parameters for call to function osal_mem_free
   \   000104   AA..         MOV     R2,?V0 + 4
   \   000106   AB..         MOV     R3,?V0 + 5
   \   000108   12....       LCALL   ??osal_mem_free?relay
    384              }
    385            }
    386          
    387            /* Display the string */
    388            HalLcd_HW_WriteLine (option, str);
   \                     ??HalLcdWriteString_4:
   \   00010B                ; Setup parameters for call to function HalLcd_HW_WriteLine
   \   00010B   AA..         MOV     R2,?V0 + 14
   \   00010D   AB..         MOV     R3,?V0 + 15
   \   00010F   A9..         MOV     R1,?V0 + 3
   \   000111   12....       LCALL   ??HalLcd_HW_WriteLine?relay
    389          
    390          #endif //HAL_LCD
    391          
    392          }
   \   000114   7F10         MOV     R7,#0x10
   \   000116   02....       LJMP    ?BANKED_LEAVE_XDATA

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ??Subroutine12_0:
   \   000000   3400         ADDC    A,#0x0
   \   000002   F583         MOV     DPH,A
   \   000004   7420         MOV     A,#0x20
   \   000006   F0           MOVX    @DPTR,A
   \   000007   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ??Subroutine13_0:
   \   000000   12....       LCALL   ??osal_memcpy?relay
   \   000003   7403         MOV     A,#0x3
   \   000005   22           RET
    393          
    394          /**************************************************************************************************
    395           * @fn      HalLcdWriteValue
    396           *
    397           * @brief   Write a value to the LCD
    398           *
    399           * @param   value  - value that will be displayed
    400           *          radix  - 8, 10, 16
    401           *          option - display options
    402           *
    403           * @return  None
    404           **************************************************************************************************/

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    405          void HalLcdWriteValue ( uint32 value, const uint8 radix, uint8 option)
   \                     HalLcdWriteValue:
    406          {
   \   000000   74F2         MOV     A,#-0xe
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 14
   \   000005                ; Auto size: 25
   \   000005   74E7         MOV     A,#-0x19
   \   000007   12....       LCALL   ?ALLOC_XSTACK8
   \   00000A   7427         MOV     A,#0x27
   \   00000C   12....       LCALL   ?XSTACK_DISP0_8
   \   00000F   E0           MOVX    A,@DPTR
   \   000010   FE           MOV     R6,A
    407          #if (HAL_LCD == TRUE)
    408            uint8 buf[LCD_MAX_BUF];
    409          
    410            _ltoa( value, &buf[0], radix );
   \   000011                ; Setup parameters for call to function _ltoa
   \   000011   85..82       MOV     DPL,?XSP + 0
   \   000014   85..83       MOV     DPH,?XSP + 1
   \   000017   8582..       MOV     ?V0 + 4,DPL
   \   00001A   8583..       MOV     ?V0 + 5,DPH
   \   00001D   78..         MOV     R0,#?V0 + 4
   \   00001F   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000022   12....       LCALL   ??Subroutine15_0 & 0xFFFF
   \                     ??CrossCallReturnLabel_21:
   \   000025   12....       LCALL   ?DEALLOC_XSTACK8
    411            HalLcdWriteString( (char*)buf, option );
   \   000028                ; Setup parameters for call to function HalLcdWriteString
   \   000028   EE           MOV     A,R6
   \   000029   F9           MOV     R1,A
   \   00002A   85..82       MOV     DPL,?XSP + 0
   \   00002D   85..83       MOV     DPH,?XSP + 1
   \   000030   AA82         MOV     R2,DPL
   \   000032   AB83         MOV     R3,DPH
   \   000034   12....       LCALL   ??HalLcdWriteString?relay
    412          #endif
    413          }
   \   000037   7419         MOV     A,#0x19
   \   000039   12....       LCALL   ?DEALLOC_XSTACK8
   \   00003C   7F06         MOV     R7,#0x6
   \   00003E   02....       LJMP    ?BANKED_LEAVE_XDATA

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ??Subroutine15_0:
   \   000000   12....       LCALL   ??_ltoa?relay
   \   000003   7402         MOV     A,#0x2
   \   000005   22           RET
    414          
    415          /**************************************************************************************************
    416           * @fn      HalLcdWriteScreen
    417           *
    418           * @brief   Write a value to the LCD
    419           *
    420           * @param   line1  - string that will be displayed on line 1
    421           *          line2  - string that will be displayed on line 2
    422           *
    423           * @return  None
    424           **************************************************************************************************/

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    425          void HalLcdWriteScreen( char *line1, char *line2 )
   \                     HalLcdWriteScreen:
    426          {
   \   000000   74F7         MOV     A,#-0x9
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 9
   \   000005                ; Auto size: 0
   \   000005   EC           MOV     A,R4
   \   000006   FE           MOV     R6,A
   \   000007   ED           MOV     A,R5
   \   000008   FF           MOV     R7,A
    427          #if (HAL_LCD == TRUE)
    428            HalLcdWriteString( line1, 1 );
   \   000009                ; Setup parameters for call to function HalLcdWriteString
   \   000009   7901         MOV     R1,#0x1
   \   00000B   12....       LCALL   ??HalLcdWriteString?relay
    429            HalLcdWriteString( line2, 2 );
   \   00000E                ; Setup parameters for call to function HalLcdWriteString
   \   00000E   7902         MOV     R1,#0x2
   \   000010   EE           MOV     A,R6
   \   000011   FA           MOV     R2,A
   \   000012   EF           MOV     A,R7
   \   000013   FB           MOV     R3,A
   \   000014   12....       LCALL   ??HalLcdWriteString?relay
    430          #endif
    431          }
   \   000017   80..         SJMP    ??Subroutine11_0
    432          
    433          /**************************************************************************************************
    434           * @fn      HalLcdWriteStringValue
    435           *
    436           * @brief   Write a string followed by a value to the LCD
    437           *
    438           * @param   title  - Title that will be displayed before the value
    439           *          value  - value
    440           *          format - redix
    441           *          line   - line number
    442           *
    443           * @return  None
    444           **************************************************************************************************/

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    445          void HalLcdWriteStringValue( char *title, uint16 value, uint8 format, uint8 line )
   \                     HalLcdWriteStringValue:
    446          {
   \   000000   74EE         MOV     A,#-0x12
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 18
   \   000005                ; Auto size: 25
   \   000005   74E7         MOV     A,#-0x19
   \   000007   12....       LCALL   ?ALLOC_XSTACK8
   \   00000A   EA           MOV     A,R2
   \   00000B   FE           MOV     R6,A
   \   00000C   EB           MOV     A,R3
   \   00000D   FF           MOV     R7,A
   \   00000E   8C..         MOV     ?V0 + 6,R4
   \   000010   8D..         MOV     ?V0 + 7,R5
   \   000012   89..         MOV     ?V0 + 4,R1
   \   000014   742B         MOV     A,#0x2b
   \   000016   12....       LCALL   ?XSTACK_DISP0_8
   \   000019   E0           MOVX    A,@DPTR
   \   00001A   F5..         MOV     ?V0 + 3,A
    447          #if (HAL_LCD == TRUE)
    448            uint8 tmpLen;
    449            uint8 buf[LCD_MAX_BUF];
    450            uint32 err;
    451          
    452            tmpLen = (uint8)osal_strlen( (char*)title );
   \   00001C                ; Setup parameters for call to function osal_strlen
   \   00001C   12....       LCALL   ?Subroutine2 & 0xFFFF
    453            osal_memcpy( buf, title, tmpLen );
   \                     ??CrossCallReturnLabel_0:
   \   00001F                ; Setup parameters for call to function osal_memcpy
   \   00001F   8E..         MOV     ?V0 + 0,R6
   \   000021   8F..         MOV     ?V0 + 1,R7
   \   000023   75..00       MOV     ?V0 + 2,#0x0
   \   000026   78..         MOV     R0,#?V0 + 0
   \   000028   12....       LCALL   ?PUSH_XSTACK_I_THREE
   \   00002B   EA           MOV     A,R2
   \   00002C   FC           MOV     R4,A
   \   00002D   7D00         MOV     R5,#0x0
   \   00002F   7403         MOV     A,#0x3
   \   000031   12....       LCALL   ?XSTACK_DISP0_8
   \   000034   12....       LCALL   ?Subroutine1 & 0xFFFF
   \                     ??CrossCallReturnLabel_11:
   \   000037   12....       LCALL   ?DEALLOC_XSTACK8
    454            buf[tmpLen] = ' ';
   \   00003A   85..82       MOV     DPL,?XSP + 0
   \   00003D   85..83       MOV     DPH,?XSP + 1
   \   000040   E582         MOV     A,DPL
   \   000042   25..         ADD     A,?V0 + 8
   \   000044   12....       LCALL   ?Subroutine0 & 0xFFFF
    455            err = (uint32)(value);
    456            _ltoa( err, &buf[tmpLen+1], format );
   \                     ??CrossCallReturnLabel_8:
   \   000047                ; Setup parameters for call to function _ltoa
   \   000047   A3           INC     DPTR
   \   000048   8582..       MOV     ?V0 + 0,DPL
   \   00004B   8583..       MOV     ?V0 + 1,DPH
   \   00004E   78..         MOV     R0,#?V0 + 0
   \   000050   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000053   A9..         MOV     R1,?V0 + 4
   \   000055   AA..         MOV     R2,?V0 + 6
   \   000057   AB..         MOV     R3,?V0 + 7
   \   000059   12....       LCALL   ??Subroutine14_0 & 0xFFFF
   \                     ??CrossCallReturnLabel_19:
   \   00005C   12....       LCALL   ?DEALLOC_XSTACK8
    457            HalLcdWriteString( (char*)buf, line );		
   \   00005F                ; Setup parameters for call to function HalLcdWriteString
   \   00005F   A9..         MOV     R1,?V0 + 3
   \   000061                REQUIRE ?Subroutine9
   \   000061                ; // Fall through to label ?Subroutine9
    458          #endif
    459          }

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine9:
   \   000000   85..82       MOV     DPL,?XSP + 0
   \   000003   85..83       MOV     DPH,?XSP + 1
   \   000006   AA82         MOV     R2,DPL
   \   000008   AB83         MOV     R3,DPH
   \   00000A   12....       LCALL   ??HalLcdWriteString?relay
   \   00000D   7419         MOV     A,#0x19
   \   00000F   12....       LCALL   ?DEALLOC_XSTACK8
   \   000012   7F0A         MOV     R7,#0xa
   \   000014   02....       LJMP    ?BANKED_LEAVE_XDATA

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine0:
   \   000000   F582         MOV     DPL,A
   \   000002   E583         MOV     A,DPH
   \   000004                REQUIRE ??Subroutine12_0
   \   000004                ; // Fall through to label ??Subroutine12_0

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine2:
   \   000000   12....       LCALL   ??osal_strlen?relay
   \   000003   EA           MOV     A,R2
   \   000004   F5..         MOV     ?V0 + 8,A
   \   000006   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine1:
   \   000000   AA82         MOV     R2,DPL
   \   000002   AB83         MOV     R3,DPH
   \   000004                REQUIRE ??Subroutine13_0
   \   000004                ; // Fall through to label ??Subroutine13_0

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ??Subroutine14_0:
   \   000000   7C00         MOV     R4,#0x0
   \   000002   7D00         MOV     R5,#0x0
   \   000004                REQUIRE ??Subroutine15_0
   \   000004                ; // Fall through to label ??Subroutine15_0
    460          
    461          /**************************************************************************************************
    462           * @fn      HalLcdWriteStringValue
    463           *
    464           * @brief   Write a string followed by a value to the LCD
    465           *
    466           * @param   title   - Title that will be displayed before the value
    467           *          value1  - value #1
    468           *          format1 - redix of value #1
    469           *          value2  - value #2
    470           *          format2 - redix of value #2
    471           *          line    - line number
    472           *
    473           * @return  None
    474           **************************************************************************************************/

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    475          void HalLcdWriteStringValueValue( char *title, uint16 value1, uint8 format1,
   \                     HalLcdWriteStringValueValue:
    476                                            uint16 value2, uint8 format2, uint8 line )
    477          {
   \   000000   74EE         MOV     A,#-0x12
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 18
   \   000005                ; Auto size: 25
   \   000005   74E7         MOV     A,#-0x19
   \   000007   12....       LCALL   ?ALLOC_XSTACK8
   \   00000A   8A..         MOV     ?V0 + 4,R2
   \   00000C   8B..         MOV     ?V0 + 5,R3
   \   00000E   8C..         MOV     ?V0 + 0,R4
   \   000010   8D..         MOV     ?V0 + 1,R5
   \   000012   89..         MOV     ?V0 + 7,R1
   \   000014   742B         MOV     A,#0x2b
   \   000016   12....       LCALL   ?XSTACK_DISP0_8
   \   000019   E0           MOVX    A,@DPTR
   \   00001A   FE           MOV     R6,A
   \   00001B   A3           INC     DPTR
   \   00001C   E0           MOVX    A,@DPTR
   \   00001D   FF           MOV     R7,A
   \   00001E   742D         MOV     A,#0x2d
   \   000020   12....       LCALL   ?XSTACK_DISP0_8
   \   000023   E0           MOVX    A,@DPTR
   \   000024   F5..         MOV     ?V0 + 3,A
   \   000026   742E         MOV     A,#0x2e
   \   000028   12....       LCALL   ?XSTACK_DISP0_8
   \   00002B   E0           MOVX    A,@DPTR
   \   00002C   F5..         MOV     ?V0 + 2,A
    478          
    479          #if (HAL_LCD == TRUE)
    480          
    481            uint8 tmpLen;
    482            uint8 buf[LCD_MAX_BUF];
    483            uint32 err;
    484          
    485            tmpLen = (uint8)osal_strlen( (char*)title );
   \   00002E                ; Setup parameters for call to function osal_strlen
   \   00002E   12....       LCALL   ?Subroutine2 & 0xFFFF
    486            if ( tmpLen )
   \                     ??CrossCallReturnLabel_1:
   \   000031   6028         JZ      ??HalLcdWriteStringValueValue_0
    487            {
    488              osal_memcpy( buf, title, tmpLen );
   \   000033                ; Setup parameters for call to function osal_memcpy
   \   000033   75..00       MOV     ?V0 + 6,#0x0
   \   000036   78..         MOV     R0,#?V0 + 4
   \   000038   12....       LCALL   ?PUSH_XSTACK_I_THREE
   \   00003B   EA           MOV     A,R2
   \   00003C   F5..         MOV     ?V0 + 4,A
   \   00003E   FC           MOV     R4,A
   \   00003F   7D00         MOV     R5,#0x0
   \   000041   7403         MOV     A,#0x3
   \   000043   12....       LCALL   ?XSTACK_DISP0_8
   \   000046   12....       LCALL   ?Subroutine1 & 0xFFFF
   \                     ??CrossCallReturnLabel_12:
   \   000049   12....       LCALL   ?DEALLOC_XSTACK8
    489              buf[tmpLen++] = ' ';
   \   00004C   85..82       MOV     DPL,?XSP + 0
   \   00004F   85..83       MOV     DPH,?XSP + 1
   \   000052   E582         MOV     A,DPL
   \   000054   25..         ADD     A,?V0 + 4
   \   000056   12....       LCALL   ?Subroutine0 & 0xFFFF
    490            }
   \                     ??CrossCallReturnLabel_9:
   \   000059   05..         INC     ?V0 + 8
    491          
    492            err = (uint32)(value1);
    493            _ltoa( err, &buf[tmpLen], format1 );
   \                     ??HalLcdWriteStringValueValue_0:
   \   00005B                ; Setup parameters for call to function _ltoa
   \   00005B   85..82       MOV     DPL,?XSP + 0
   \   00005E   85..83       MOV     DPH,?XSP + 1
   \   000061   E582         MOV     A,DPL
   \   000063   25..         ADD     A,?V0 + 8
   \   000065   F5..         MOV     ?V0 + 4,A
   \   000067   E583         MOV     A,DPH
   \   000069   3400         ADDC    A,#0x0
   \   00006B   F5..         MOV     ?V0 + 5,A
   \   00006D   78..         MOV     R0,#?V0 + 4
   \   00006F   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000072   A9..         MOV     R1,?V0 + 7
   \   000074   12....       LCALL   ?Subroutine3 & 0xFFFF
   \                     ??CrossCallReturnLabel_17:
   \   000077   12....       LCALL   ?DEALLOC_XSTACK8
    494            tmpLen = (uint8)osal_strlen( (char*)buf );
   \   00007A                ; Setup parameters for call to function osal_strlen
   \   00007A   85..82       MOV     DPL,?XSP + 0
   \   00007D   85..83       MOV     DPH,?XSP + 1
   \   000080   AA82         MOV     R2,DPL
   \   000082   AB83         MOV     R3,DPH
   \   000084   12....       LCALL   ?Subroutine2 & 0xFFFF
    495          
    496            buf[tmpLen++] = ',';
   \                     ??CrossCallReturnLabel_2:
   \   000087   F5..         MOV     ?V0 + 0,A
   \   000089   85..82       MOV     DPL,?XSP + 0
   \   00008C   85..83       MOV     DPH,?XSP + 1
   \   00008F   E582         MOV     A,DPL
   \   000091   25..         ADD     A,?V0 + 0
   \   000093   F582         MOV     DPL,A
   \   000095   E583         MOV     A,DPH
   \   000097   3400         ADDC    A,#0x0
   \   000099   F583         MOV     DPH,A
   \   00009B   742C         MOV     A,#0x2c
   \   00009D   F0           MOVX    @DPTR,A
   \   00009E   05..         INC     ?V0 + 8
    497            buf[tmpLen++] = ' ';
   \   0000A0   85....       MOV     ?V0 + 0,?V0 + 8
   \   0000A3   85..82       MOV     DPL,?XSP + 0
   \   0000A6   85..83       MOV     DPH,?XSP + 1
   \   0000A9   E582         MOV     A,DPL
   \   0000AB   25..         ADD     A,?V0 + 0
   \   0000AD   12....       LCALL   ?Subroutine0 & 0xFFFF
    498            err = (uint32)(value2);
    499            _ltoa( err, &buf[tmpLen], format2 );
   \                     ??CrossCallReturnLabel_10:
   \   0000B0                ; Setup parameters for call to function _ltoa
   \   0000B0   7401         MOV     A,#0x1
   \   0000B2   25..         ADD     A,?V0 + 8
   \   0000B4   F8           MOV     R0,A
   \   0000B5   85..82       MOV     DPL,?XSP + 0
   \   0000B8   85..83       MOV     DPH,?XSP + 1
   \   0000BB   E582         MOV     A,DPL
   \   0000BD   28           ADD     A,R0
   \   0000BE   F5..         MOV     ?V0 + 0,A
   \   0000C0   E583         MOV     A,DPH
   \   0000C2   3400         ADDC    A,#0x0
   \   0000C4   F5..         MOV     ?V0 + 1,A
   \   0000C6   78..         MOV     R0,#?V0 + 0
   \   0000C8   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   0000CB   A9..         MOV     R1,?V0 + 3
   \   0000CD   8E..         MOV     ?V0 + 0,R6
   \   0000CF   8F..         MOV     ?V0 + 1,R7
   \   0000D1   12....       LCALL   ?Subroutine3 & 0xFFFF
   \                     ??CrossCallReturnLabel_18:
   \   0000D4   12....       LCALL   ?DEALLOC_XSTACK8
    500          
    501            HalLcdWriteString( (char *)buf, line );		
   \   0000D7                ; Setup parameters for call to function HalLcdWriteString
   \   0000D7   A9..         MOV     R1,?V0 + 2
   \   0000D9   02....       LJMP    ?Subroutine9 & 0xFFFF
    502          
    503          #endif
    504          }

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine3:
   \   000000   AA..         MOV     R2,?V0 + 0
   \   000002   AB..         MOV     R3,?V0 + 1
   \   000004                REQUIRE ??Subroutine14_0
   \   000004                ; // Fall through to label ??Subroutine14_0
    505          
    506          /**************************************************************************************************
    507           * @fn      HalLcdDisplayPercentBar
    508           *
    509           * @brief   Display percentage bar on the LCD
    510           *
    511           * @param   title   -
    512           *          value   -
    513           *
    514           * @return  None
    515           **************************************************************************************************/

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    516          void HalLcdDisplayPercentBar( char *title, uint8 value )
   \                     HalLcdDisplayPercentBar:
    517          {
   \   000000   74F1         MOV     A,#-0xf
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 15
   \   000005                ; Auto size: 17
   \   000005   74EF         MOV     A,#-0x11
   \   000007   12....       LCALL   ?ALLOC_XSTACK8
   \   00000A   E9           MOV     A,R1
   \   00000B   FE           MOV     R6,A
    518          #if (HAL_LCD == TRUE)
    519          
    520            uint8 percent;
    521            uint8 leftOver;
    522            uint8 buf[17];
    523            uint32 err;
    524            uint8 x;
    525          
    526            /* Write the title: */
    527            HalLcdWriteString( title, HAL_LCD_LINE_1 );
   \   00000C                ; Setup parameters for call to function HalLcdWriteString
   \   00000C   7901         MOV     R1,#0x1
   \   00000E   12....       LCALL   ??HalLcdWriteString?relay
    528          
    529            if ( value > 100 )
   \   000011   EE           MOV     A,R6
   \   000012   C3           CLR     C
   \   000013   9465         SUBB    A,#0x65
   \   000015   4002         JC      ??HalLcdDisplayPercentBar_0
    530              value = 100;
   \   000017   7E64         MOV     R6,#0x64
    531          
    532            /* convert to blocks */
    533            percent = (uint8)(value / 10);
   \                     ??HalLcdDisplayPercentBar_0:
   \   000019   75F00A       MOV     B,#0xa
   \   00001C   EE           MOV     A,R6
   \   00001D   84           DIV     AB
   \   00001E   FF           MOV     R7,A
    534            leftOver = (uint8)(value % 10);
   \   00001F   EE           MOV     A,R6
   \   000020   75F00A       MOV     B,#0xa
   \   000023   84           DIV     AB
   \   000024   E5F0         MOV     A,B
   \   000026   F5..         MOV     ?V0 + 0,A
    535          
    536            /* Make window */
    537            osal_memcpy( buf, "[          ]  ", 15 );
   \   000028                ; Setup parameters for call to function osal_memcpy
   \   000028   75....       MOV     ?V0 + 4,#(`?<Constant "[          ]  ">` & 0xff)
   \   00002B   75....       MOV     ?V0 + 5,#((`?<Constant "[          ]  ">` >> 8) & 0xff)
   \   00002E   75..00       MOV     ?V0 + 6,#0x0
   \   000031   78..         MOV     R0,#?V0 + 4
   \   000033   12....       LCALL   ?PUSH_XSTACK_I_THREE
   \   000036   7C0F         MOV     R4,#0xf
   \   000038   7D00         MOV     R5,#0x0
   \   00003A   7403         MOV     A,#0x3
   \   00003C   12....       LCALL   ?XSTACK_DISP0_8
   \   00003F   12....       LCALL   ?Subroutine1 & 0xFFFF
   \                     ??CrossCallReturnLabel_13:
   \   000042   12....       LCALL   ?DEALLOC_XSTACK8
    538          
    539            for ( x = 0; x < percent; x ++ )
   \   000045   7A00         MOV     R2,#0x0
   \   000047   8004         SJMP    ??HalLcdDisplayPercentBar_1
    540            {
    541              buf[1+x] = '>';
   \                     ??HalLcdDisplayPercentBar_2:
   \   000049   743E         MOV     A,#0x3e
   \   00004B   F0           MOVX    @DPTR,A
    542            }
   \   00004C   0A           INC     R2
   \                     ??HalLcdDisplayPercentBar_1:
   \   00004D   8A..         MOV     ?V0 + 2,R2
   \   00004F   12....       LCALL   ?Subroutine4 & 0xFFFF
   \                     ??CrossCallReturnLabel_3:
   \   000052   A3           INC     DPTR
   \   000053   EA           MOV     A,R2
   \   000054   C3           CLR     C
   \   000055   9F           SUBB    A,R7
   \   000056   40F1         JC      ??HalLcdDisplayPercentBar_2
    543          
    544            if ( leftOver >= 5 )
   \   000058   E5..         MOV     A,?V0 + 0
   \   00005A   C3           CLR     C
   \   00005B   9405         SUBB    A,#0x5
   \   00005D   4003         JC      ??HalLcdDisplayPercentBar_3
    545              buf[1+x] = '+';
   \   00005F   742B         MOV     A,#0x2b
   \   000061   F0           MOVX    @DPTR,A
    546          
    547            err = (uint32)value;
    548            _ltoa( err, (uint8*)&buf[13], 10 );
   \                     ??HalLcdDisplayPercentBar_3:
   \   000062                ; Setup parameters for call to function _ltoa
   \   000062   740D         MOV     A,#0xd
   \   000064   12....       LCALL   ?XSTACK_DISP0_8
   \   000067   8582..       MOV     ?V0 + 0,DPL
   \   00006A   8583..       MOV     ?V0 + 1,DPH
   \   00006D   78..         MOV     R0,#?V0 + 0
   \   00006F   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000072   790A         MOV     R1,#0xa
   \   000074   EE           MOV     A,R6
   \   000075   FA           MOV     R2,A
   \   000076   7B00         MOV     R3,#0x0
   \   000078   12....       LCALL   ??Subroutine14_0 & 0xFFFF
   \                     ??CrossCallReturnLabel_20:
   \   00007B   12....       LCALL   ?DEALLOC_XSTACK8
    549          
    550            HalLcdWriteString( (char*)buf, HAL_LCD_LINE_2 );
   \   00007E                ; Setup parameters for call to function HalLcdWriteString
   \   00007E   7902         MOV     R1,#0x2
   \   000080   85..82       MOV     DPL,?XSP + 0
   \   000083   85..83       MOV     DPH,?XSP + 1
   \   000086   AA82         MOV     R2,DPL
   \   000088   AB83         MOV     R3,DPH
   \   00008A   12....       LCALL   ??HalLcdWriteString?relay
    551          
    552          #endif
    553          
    554          }
   \   00008D   7411         MOV     A,#0x11
   \   00008F   12....       LCALL   ?DEALLOC_XSTACK8
   \   000092   7F07         MOV     R7,#0x7
   \   000094   02....       LJMP    ?BANKED_LEAVE_XDATA

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine4:
   \   000000   85..82       MOV     DPL,?XSP + 0
   \   000003   85..83       MOV     DPH,?XSP + 1
   \   000006   E582         MOV     A,DPL
   \   000008   25..         ADD     A,?V0 + 2
   \   00000A   F582         MOV     DPL,A
   \   00000C   E583         MOV     A,DPH
   \   00000E   3400         ADDC    A,#0x0
   \   000010   F583         MOV     DPH,A
   \   000012   22           RET
    555          
    556          
    557          #if (HAL_LCD == TRUE)
    558          /**************************************************************************************************
    559           *                                    HARDWARE LCD
    560           **************************************************************************************************/
    561          
    562          /**************************************************************************************************
    563           * @fn      halLcd_ConfigIO
    564           *
    565           * @brief   Configure IO lines needed for LCD control.
    566           *
    567           * @param   None
    568           *
    569           * @return  None
    570           **************************************************************************************************/
    571          static void halLcd_ConfigIO(void)
    572          {
    573            /* GPIO configuration */
    574            HAL_CONFIG_IO_OUTPUT(HAL_LCD_MODE_PORT,  HAL_LCD_MODE_PIN,  1);
    575            HAL_CONFIG_IO_OUTPUT(HAL_LCD_RESET_PORT, HAL_LCD_RESET_PIN, 1);
    576            HAL_CONFIG_IO_OUTPUT(HAL_LCD_CS_PORT,    HAL_LCD_CS_PIN,    1);
    577            HAL_CONFIG_IO_OUTPUT(HAL_LCD_BK_PORT,    HAL_LCD_BK_PIN,    1);
    578          
    579          }
    580          
    581          /**************************************************************************************************
    582           * @fn      halLcd_ConfigSPI
    583           *
    584           * @brief   Configure SPI lines needed for talking to LCD.
    585           *
    586           * @param   None
    587           *
    588           * @return  None
    589           **************************************************************************************************/
    590          static void halLcd_ConfigSPI(void)
    591          {
    592            /* UART/SPI Peripheral configuration */
    593          
    594             uint8 baud_exponent;
    595             uint8 baud_mantissa;
    596          
    597            /* Set SPI on UART 1 alternative 2 */
    598            PERCFG |= 0x02;
    599          
    600            /* Configure clk, master out and master in lines */
    601            HAL_CONFIG_IO_PERIPHERAL(HAL_LCD_CLK_PORT,  HAL_LCD_CLK_PIN);
    602            HAL_CONFIG_IO_PERIPHERAL(HAL_LCD_MOSI_PORT, HAL_LCD_MOSI_PIN);
    603          
    604            /* Set SPI speed to 1 MHz (the values assume system clk of 32MHz)
    605             * Confirm on board that this results in 1MHz spi clk.
    606             */
    607            baud_exponent = 15;
    608            baud_mantissa =  0;
    609          
    610            /* Configure SPI */
    611            U1UCR  = 0x80;      /* Flush and goto IDLE state. 8-N-1. */
    612            U1CSR  = 0x00;      /* SPI mode, master. */
    613            U1GCR  = HAL_SPI_TRANSFER_MSB_FIRST | HAL_SPI_CLOCK_PHA_0 | HAL_SPI_CLOCK_POL_LO | baud_exponent;
    614            U1BAUD = baud_mantissa;
    615          }
    616          
    617          /**************************************************************************************************
    618           * @fn      HalLcd_HW_Init
    619           *
    620           * @brief   Initilize HW LCD Driver.
    621           *
    622           * @param   None
    623           *
    624           * @return  None
    625           **************************************************************************************************/

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    626          void HalLcd_HW_Init(void)
   \                     HalLcd_HW_Init:
    627          {
   \   000000   C082         PUSH    DPL
   \   000002   C083         PUSH    DPH
   \   000004                ; Saved register size: 2
   \   000004                ; Auto size: 0
    628              /* Initialize LCD IO lines */
    629              halLcd_ConfigIO();
   \   000004   53F3FE       ANL     0xf3,#0xfe
   \   000007   D280         SETB    0x80.0
   \   000009   43FD01       ORL     0xfd,#0x1
   \   00000C   53F4FD       ANL     0xf4,#0xfd
   \   00000F   D291         SETB    0x90.1
   \   000011   43FE02       ORL     0xfe,#0x2
   \   000014   53F4FB       ANL     0xf4,#0xfb
   \   000017   D292         SETB    0x90.2
   \   000019   43FE04       ORL     0xfe,#0x4
   \   00001C   53F37F       ANL     0xf3,#0x7f
   \   00001F   D287         SETB    0x80.7
   \   000021   43FD80       ORL     0xfd,#0x80
    630          
    631              halLcd_ConfigSPI();
   \   000024   43F102       ORL     0xf1,#0x2
   \   000027   43F420       ORL     0xf4,#0x20
   \   00002A   43F440       ORL     0xf4,#0x40
   \   00002D   75FB80       MOV     0xfb,#-0x80
   \   000030   75F800       MOV     0xf8,#0x0
   \   000033   75FC2F       MOV     0xfc,#0x2f
   \   000036   75FA00       MOV     0xfa,#0x0
    632               
    633              
    634                  HalLcd_HW_Control(0xa2);
   \   000039                ; Setup parameters for call to function HalLcd_HW_Control
   \   000039   79A2         MOV     R1,#-0x5e
   \   00003B   12....       LCALL   ??HalLcd_HW_Control?relay
    635                  HalLcd_HW_Control(0xa0);
   \   00003E                ; Setup parameters for call to function HalLcd_HW_Control
   \   00003E   79A0         MOV     R1,#-0x60
   \   000040   12....       LCALL   ??HalLcd_HW_Control?relay
    636                  HalLcd_HW_Control(0xc8);
   \   000043                ; Setup parameters for call to function HalLcd_HW_Control
   \   000043   79C8         MOV     R1,#-0x38
   \   000045   12....       LCALL   ??HalLcd_HW_Control?relay
    637                  HalLcd_HW_Control(0x40);
   \   000048                ; Setup parameters for call to function HalLcd_HW_Control
   \   000048   7940         MOV     R1,#0x40
   \   00004A   12....       LCALL   ??HalLcd_HW_Control?relay
    638                  HalLcd_HW_Control(0x2c);
   \   00004D                ; Setup parameters for call to function HalLcd_HW_Control
   \   00004D   792C         MOV     R1,#0x2c
   \   00004F   12....       LCALL   ??HalLcd_HW_Control?relay
    639                  HalLcd_HW_Control(0x2e);
   \   000052                ; Setup parameters for call to function HalLcd_HW_Control
   \   000052   792E         MOV     R1,#0x2e
   \   000054   12....       LCALL   ??HalLcd_HW_Control?relay
    640                  HalLcd_HW_Control(0x2f);
   \   000057                ; Setup parameters for call to function HalLcd_HW_Control
   \   000057   792F         MOV     R1,#0x2f
   \   000059   12....       LCALL   ??HalLcd_HW_Control?relay
    641                  HalLcd_HW_Control(0x26);
   \   00005C                ; Setup parameters for call to function HalLcd_HW_Control
   \   00005C   7926         MOV     R1,#0x26
   \   00005E   12....       LCALL   ??HalLcd_HW_Control?relay
    642                  HalLcd_HW_Control(0x81);
   \   000061                ; Setup parameters for call to function HalLcd_HW_Control
   \   000061   7981         MOV     R1,#-0x7f
   \   000063   12....       LCALL   ??HalLcd_HW_Control?relay
    643                  HalLcd_HW_Control(0x88);
   \   000066                ; Setup parameters for call to function HalLcd_HW_Control
   \   000066   7988         MOV     R1,#-0x78
   \   000068   12....       LCALL   ??HalLcd_HW_Control?relay
    644                  HalLcd_HW_Control(0x1a);
   \   00006B                ; Setup parameters for call to function HalLcd_HW_Control
   \   00006B   791A         MOV     R1,#0x1a
   \   00006D   12....       LCALL   ??HalLcd_HW_Control?relay
    645                  HalLcd_HW_Control(0xaf);
   \   000070                ; Setup parameters for call to function HalLcd_HW_Control
   \   000070   79AF         MOV     R1,#-0x51
   \   000072   12....       LCALL   ??HalLcd_HW_Control?relay
    646              /* Clear the display */
    647              HalLcd_HW_Clear();
   \   000075                ; Setup parameters for call to function HalLcd_HW_Clear
   \   000075   12....       LCALL   ??HalLcd_HW_Clear?relay
    648          
    649          }
   \   000078   02....       LJMP    ?Subroutine7 & 0xFFFF
   \   00007B                REQUIRE PERCFG
   \   00007B                REQUIRE P1SEL
   \   00007B                REQUIRE _A_U1CSR
   \   00007B                REQUIRE U1BAUD
   \   00007B                REQUIRE U1UCR
   \   00007B                REQUIRE U1GCR
   \   00007B                REQUIRE _A_P0
   \   00007B                REQUIRE _A_P1
   \   00007B                REQUIRE P0SEL
   \   00007B                REQUIRE P0DIR
   \   00007B                REQUIRE P1DIR
    650          
    651          /**************************************************************************************************
    652           * @fn      HalLcd_HW_Control
    653           *
    654           * @brief   Write 1 command to the LCD
    655           *
    656           * @param   uint8 cmd - command to be written to the LCD
    657           *
    658           * @return  None
    659           **************************************************************************************************/

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    660          void HalLcd_HW_Control(uint8 cmd)
   \                     HalLcd_HW_Control:
    661          {
   \   000000                ; Saved register size: 0
   \   000000                ; Auto size: 0
    662            LCD_SPI_BEGIN();
   \   000000   C292         CLR     0x90.2
    663            LCD_DO_CONTROL();
   \   000002   C280         CLR     0x80.0
    664            LCD_SPI_TX(cmd);
   \   000004   53F8F9       ANL     0xf8,#0xf9
   \   000007   E5F8         MOV     A,0xf8
   \   000009   89F9         MOV     0xf9,R1
   \                     ??HalLcd_HW_Control_0:
   \   00000B   A2F9         MOV     C,0xf8.1
   \   00000D   50FC         JNC     ??HalLcd_HW_Control_0
    665            LCD_SPI_WAIT_RXRDY();
   \                     ??HalLcd_HW_Control_1:
   \   00000F   A2F9         MOV     C,0xf8.1
   \   000011   50FC         JNC     ??HalLcd_HW_Control_1
    666            LCD_SPI_END();
   \   000013                REQUIRE ?Subroutine6
   \   000013                REQUIRE _A_P0
   \   000013                REQUIRE _A_P1
   \   000013                REQUIRE _A_U1CSR
   \   000013                REQUIRE U1DBUF
   \   000013                ; // Fall through to label ?Subroutine6
    667          }

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine6:
   \   000000   00           NOP
   \   000001   00           NOP
   \   000002   00           NOP
   \   000003   00           NOP
   \   000004   D292         SETB    0x90.2
   \   000006   02....       LJMP    ?BRET
    668          
    669          /**************************************************************************************************
    670           * @fn      HalLcd_HW_Write
    671           *
    672           * @brief   Write 1 byte to the LCD
    673           *
    674           * @param   uint8 data - data to be written to the LCD
    675           *
    676           * @return  None
    677           **************************************************************************************************/

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    678          void HalLcd_HW_Write(uint8 data)
   \                     HalLcd_HW_Write:
    679          {
   \   000000                ; Saved register size: 0
   \   000000                ; Auto size: 0
    680            LCD_SPI_BEGIN();
   \   000000   C292         CLR     0x90.2
    681            LCD_DO_WRITE();
   \   000002   D280         SETB    0x80.0
    682            LCD_SPI_TX(data);
   \   000004   53F8F9       ANL     0xf8,#0xf9
   \   000007   E5F8         MOV     A,0xf8
   \   000009   89F9         MOV     0xf9,R1
   \                     ??HalLcd_HW_Write_0:
   \   00000B   A2F9         MOV     C,0xf8.1
   \   00000D   50FC         JNC     ??HalLcd_HW_Write_0
    683            LCD_SPI_WAIT_RXRDY();
   \                     ??HalLcd_HW_Write_1:
   \   00000F   A2F9         MOV     C,0xf8.1
   \   000011   50FC         JNC     ??HalLcd_HW_Write_1
    684            LCD_SPI_END();
   \   000013   80..         SJMP    ?Subroutine6
   \   000015                REQUIRE _A_P0
   \   000015                REQUIRE _A_P1
   \   000015                REQUIRE _A_U1CSR
   \   000015                REQUIRE U1DBUF
    685          }
    686          
    687          /**************************************************************************************************
    688           * @fn          HalLcd_HW_SetContrast
    689           *
    690           * @brief       Set display contrast
    691           *
    692           * @param       uint8 value - contrast value
    693           *
    694           * @return      none
    695           **************************************************************************************************/

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    696          void HalLcd_HW_SetContrast(uint8 value)
   \                     HalLcd_HW_SetContrast:
    697          {
   \   000000   74F7         MOV     A,#-0x9
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 9
   \   000005                ; Auto size: 0
   \   000005   E9           MOV     A,R1
   \   000006   FE           MOV     R6,A
    698              HalLcd_HW_Control(CONTRAST_CTRL_REGISTER);    
   \   000007                ; Setup parameters for call to function HalLcd_HW_Control
   \   000007   7981         MOV     R1,#-0x7f
   \   000009   12....       LCALL   ??HalLcd_HW_Control?relay
    699              HalLcd_HW_Control(value);   
   \   00000C                ; Setup parameters for call to function HalLcd_HW_Control
   \   00000C   EE           MOV     A,R6
   \   00000D   02....       LJMP    ?Subroutine8 & 0xFFFF
    700          }
    701          
    702          /**************************************************************************************************
    703           * @fn      HalLcd_HW_Clear
    704           *
    705           * @brief   Clear the HW LCD
    706           *
    707           * @param   None
    708           *
    709           * @return  None
    710           **************************************************************************************************/

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    711          void HalLcd_HW_Clear(void)
   \                     HalLcd_HW_Clear:
    712          {
   \   000000   74F7         MOV     A,#-0x9
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 9
   \   000005                ; Auto size: 0
    713          	uint8 i,j;
    714          	for (i = 0; i < 8; i++)
   \   000005   7F00         MOV     R7,#0x0
    715          	{
    716          		for (j = 0; j < 132; j++)
   \                     ??HalLcd_HW_Clear_0:
   \   000007   7E00         MOV     R6,#0x0
    717          		{
    718          			SET_DDRAM_ADDR(j,i);
   \                     ??HalLcd_HW_Clear_1:
   \   000009                ; Setup parameters for call to function SET_DDRAM_ADDR
   \   000009   EF           MOV     A,R7
   \   00000A   FA           MOV     R2,A
   \   00000B   EE           MOV     A,R6
   \   00000C   F9           MOV     R1,A
   \   00000D   12....       LCALL   ??SET_DDRAM_ADDR?relay
    719          			HalLcd_HW_Write(0);
   \   000010                ; Setup parameters for call to function HalLcd_HW_Write
   \   000010   7900         MOV     R1,#0x0
   \   000012   12....       LCALL   ??HalLcd_HW_Write?relay
    720          		}
   \   000015   0E           INC     R6
   \   000016   EE           MOV     A,R6
   \   000017   C3           CLR     C
   \   000018   9484         SUBB    A,#-0x7c
   \   00001A   40ED         JC      ??HalLcd_HW_Clear_1
    721          	}
   \   00001C   0F           INC     R7
   \   00001D   EF           MOV     A,R7
   \   00001E   C3           CLR     C
   \   00001F   9408         SUBB    A,#0x8
   \   000021   40E4         JC      ??HalLcd_HW_Clear_0
    722          }
   \   000023   02....       LJMP    ??Subroutine11_0 & 0xFFFF
    723          
    724          /**************************************************************************************************
    725           * @fn      HalLcd_HW_WriteChar
    726           *
    727           * @brief   Write one char to the display
    728           *
    729           * @param   uint8 line - line number that the char will be displayed
    730           *          uint8 col - colum where the char will be displayed
    731           *
    732           * @return  None
    733           **************************************************************************************************/

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    734          void HalLcd_HW_WriteChar(uint8 line, uint8 col, char text)
   \                     HalLcd_HW_WriteChar:
    735          {
   \   000000   74F4         MOV     A,#-0xc
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 12
   \   000005                ; Auto size: 0
   \   000005   89..         MOV     ?V0 + 2,R1
   \   000007   8B..         MOV     ?V0 + 0,R3
    736              uint8 j;
    737              uint16 addr;
    738              uint8 cvt_result;
    739          
    740              if (col < LCD_MAX_LINE_LENGTH && line <= HAL_LCD_LINE_4)
   \   000009   EA           MOV     A,R2
   \   00000A   C3           CLR     C
   \   00000B   9410         SUBB    A,#0x10
   \   00000D   506E         JNC     ??HalLcd_HW_WriteChar_0
   \   00000F   E9           MOV     A,R1
   \   000010   C3           CLR     C
   \   000011   9405         SUBB    A,#0x5
   \   000013   5068         JNC     ??HalLcd_HW_WriteChar_0
    741              {
    742                      
    743                  //write first line 
    744                  SET_DDRAM_ADDR(col * 8, (line - 1) * 2);
   \   000015   EA           MOV     A,R2
   \   000016   33           RLC     A
   \   000017   33           RLC     A
   \   000018   33           RLC     A
   \   000019   54F8         ANL     A,#0xf8
   \   00001B   F5..         MOV     ?V0 + 3,A
   \   00001D                ; Setup parameters for call to function SET_DDRAM_ADDR
   \   00001D   74FF         MOV     A,#-0x1
   \   00001F   25..         ADD     A,?V0 + 2
   \   000021   C3           CLR     C
   \   000022   33           RLC     A
   \   000023   FA           MOV     R2,A
   \   000024   A9..         MOV     R1,?V0 + 3
   \   000026   12....       LCALL   ??SET_DDRAM_ADDR?relay
    745                  addr = (text - 0x20)*12;
   \   000029   74E0         MOV     A,#-0x20
   \   00002B   25..         ADD     A,?V0 + 0
   \   00002D   FE           MOV     R6,A
   \   00002E   74FF         MOV     A,#-0x1
   \   000030   3400         ADDC    A,#0x0
   \   000032   FF           MOV     R7,A
   \   000033   EE           MOV     A,R6
   \   000034   75F00C       MOV     B,#0xc
   \   000037   A4           MUL     AB
   \   000038   FE           MOV     R6,A
   \   000039   AAF0         MOV     R2,B
   \   00003B   75F00C       MOV     B,#0xc
   \   00003E   EF           MOV     A,R7
   \   00003F   A4           MUL     AB
   \   000040   2A           ADD     A,R2
   \   000041   FF           MOV     R7,A
    746          
    747                  for (j = 0; j < 8; j++)
   \   000042   75..00       MOV     ?V0 + 0,#0x0
    748                  {
    749                       cvt_result = HalLcd_Convert_DZK(j,addr);
    750                       cvt_result = cvt_result << 2;
    751                  	HalLcd_HW_Write(cvt_result);
   \                     ??HalLcd_HW_WriteChar_1:
   \   000045                ; Setup parameters for call to function HalLcd_HW_Write
   \   000045                ; Setup parameters for call to function HalLcd_Convert_DZK
   \   000045   EE           MOV     A,R6
   \   000046   FA           MOV     R2,A
   \   000047   EF           MOV     A,R7
   \   000048   FB           MOV     R3,A
   \   000049   A9..         MOV     R1,?V0 + 0
   \   00004B   12....       LCALL   ??HalLcd_Convert_DZK?relay
   \   00004E   E9           MOV     A,R1
   \   00004F   33           RLC     A
   \   000050   33           RLC     A
   \   000051   54FC         ANL     A,#0xfc
   \   000053   F9           MOV     R1,A
   \   000054   12....       LCALL   ?Subroutine5 & 0xFFFF
    752                  }
   \                     ??CrossCallReturnLabel_5:
   \   000057   40EC         JC      ??HalLcd_HW_WriteChar_1
    753          
    754                  //write second line 
    755                  SET_DDRAM_ADDR(col * 8, (line - 1) * 2 + 1);
   \   000059                ; Setup parameters for call to function SET_DDRAM_ADDR
   \   000059   E5..         MOV     A,?V0 + 2
   \   00005B   C3           CLR     C
   \   00005C   33           RLC     A
   \   00005D   14           DEC     A
   \   00005E   FA           MOV     R2,A
   \   00005F   A9..         MOV     R1,?V0 + 3
   \   000061   12....       LCALL   ??SET_DDRAM_ADDR?relay
    756                  addr = addr + 6;
   \   000064   EE           MOV     A,R6
   \   000065   2406         ADD     A,#0x6
   \   000067   FE           MOV     R6,A
   \   000068   EF           MOV     A,R7
   \   000069   3400         ADDC    A,#0x0
   \   00006B   FF           MOV     R7,A
    757          
    758                  for (j = 0; j < 8; j++)
   \   00006C   75..00       MOV     ?V0 + 0,#0x0
    759                  {
    760                       cvt_result = HalLcd_Convert_DZK(j,addr);
    761                  	HalLcd_HW_Write(cvt_result);
   \                     ??HalLcd_HW_WriteChar_2:
   \   00006F                ; Setup parameters for call to function HalLcd_HW_Write
   \   00006F                ; Setup parameters for call to function HalLcd_Convert_DZK
   \   00006F   EE           MOV     A,R6
   \   000070   FA           MOV     R2,A
   \   000071   EF           MOV     A,R7
   \   000072   FB           MOV     R3,A
   \   000073   A9..         MOV     R1,?V0 + 0
   \   000075   12....       LCALL   ??HalLcd_Convert_DZK?relay
   \   000078   12....       LCALL   ?Subroutine5 & 0xFFFF
    762                  }
    763          
    764              }
   \                     ??CrossCallReturnLabel_6:
   \   00007B   40F2         JC      ??HalLcd_HW_WriteChar_2
   \                     ??HalLcd_HW_WriteChar_0:
   \   00007D                REQUIRE ?Subroutine10
   \   00007D                ; // Fall through to label ?Subroutine10
    765              else
    766              {
    767                  return;
    768              }
    769          }

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine10:
   \   000000   7F04         MOV     R7,#0x4
   \   000002   02....       LJMP    ?BANKED_LEAVE_XDATA

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine5:
   \   000000   12....       LCALL   ??HalLcd_HW_Write?relay
   \   000003   05..         INC     ?V0 + 0
   \   000005   E5..         MOV     A,?V0 + 0
   \   000007   C3           CLR     C
   \   000008   9408         SUBB    A,#0x8
   \   00000A   22           RET
    770          

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    771          uint8 HalLcd_Convert_DZK(uint8 index, uint16 addr)
   \                     HalLcd_Convert_DZK:
    772          {
   \   000000   74F4         MOV     A,#-0xc
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 12
   \   000005                ; Auto size: 8
   \   000005   74F8         MOV     A,#-0x8
   \   000007   12....       LCALL   ?ALLOC_XSTACK8
   \   00000A   E9           MOV     A,R1
   \   00000B   FE           MOV     R6,A
    773              uint8 return_val = 0;
   \   00000C   75..00       MOV     ?V0 + 0,#0x0
    774              uint8 j;
    775              uint8 temp;
    776              uint8 mask_array[8] = {BIT7,BIT6,BIT5,BIT4,BIT3,BIT2,BIT1,BIT0};
   \   00000F   85..82       MOV     DPL,?XSP + 0
   \   000012   85..83       MOV     DPH,?XSP + 1
   \   000015   AC82         MOV     R4,DPL
   \   000017   AD83         MOV     R5,DPH
   \   000019   7583..       MOV     DPH,#((`?<Constant {128, 64, 32, 16, 8, 4, 2, 1}>` >> 8) & 0xff)
   \   00001C   7582..       MOV     DPL,#(`?<Constant {128, 64, 32, 16, 8, 4, 2, 1}>` & 0xff)
   \   00001F   7408         MOV     A,#0x8
   \   000021   12....       LCALL   ?MOVE_LONG8_XDATA_XDATA
    777              uint8 mask = mask_array[index];
   \   000024   8E..         MOV     ?V0 + 2,R6
   \   000026   12....       LCALL   ?Subroutine4 & 0xFFFF
   \                     ??CrossCallReturnLabel_4:
   \   000029   E0           MOVX    A,@DPTR
   \   00002A   FD           MOV     R5,A
    778          
    779              if (index > 7)
   \   00002B   EE           MOV     A,R6
   \   00002C   C3           CLR     C
   \   00002D   9408         SUBB    A,#0x8
   \   00002F   4004         JC      ??HalLcd_Convert_DZK_0
    780              {
    781                  return return_val;
   \   000031   7900         MOV     R1,#0x0
   \   000033   805F         SJMP    ??HalLcd_Convert_DZK_1
    782              }
    783          
    784              for (j = 0; j < 6; j++)
   \                     ??HalLcd_Convert_DZK_0:
   \   000035   7C00         MOV     R4,#0x0
   \                     ??HalLcd_Convert_DZK_2:
   \   000037   EC           MOV     A,R4
   \   000038   F8           MOV     R0,A
   \   000039   C3           CLR     C
   \   00003A   E4           CLR     A
   \   00003B   98           SUBB    A,R0
   \   00003C   F8           MOV     R0,A
   \   00003D   E4           CLR     A
   \   00003E   9400         SUBB    A,#0x0
   \   000040   F9           MOV     R1,A
   \   000041   85..82       MOV     DPL,?XSP + 0
   \   000044   85..83       MOV     DPH,?XSP + 1
   \   000047   E582         MOV     A,DPL
   \   000049   28           ADD     A,R0
   \   00004A   F582         MOV     DPL,A
   \   00004C   E583         MOV     A,DPH
   \   00004E   39           ADDC    A,R1
   \   00004F   F583         MOV     DPH,A
   \   000051   A3           INC     DPTR
   \   000052   A3           INC     DPTR
   \   000053   A3           INC     DPTR
   \   000054   A3           INC     DPTR
   \   000055   A3           INC     DPTR
   \   000056   A3           INC     DPTR
   \   000057   A3           INC     DPTR
   \   000058   E0           MOVX    A,@DPTR
   \   000059   FF           MOV     R7,A
   \   00005A   8C..         MOV     ?V0 + 2,R4
   \   00005C   E5..         MOV     A,?V0 + 2
   \   00005E   2A           ADD     A,R2
   \   00005F   F8           MOV     R0,A
   \   000060   E4           CLR     A
   \   000061   3B           ADDC    A,R3
   \   000062   F9           MOV     R1,A
   \   000063   E8           MOV     A,R0
   \   000064   24..         ADD     A,#(ASCIITAB_DZK & 0xff)
   \   000066   F582         MOV     DPL,A
   \   000068   E9           MOV     A,R1
   \   000069   34..         ADDC    A,#((ASCIITAB_DZK >> 8) & 0xff)
   \   00006B   F583         MOV     DPH,A
   \   00006D   E4           CLR     A
   \   00006E   93           MOVC    A,@A+DPTR
   \   00006F   5D           ANL     A,R5
   \   000070   F5..         MOV     ?V0 + 2,A
   \   000072   75..00       MOV     ?V0 + 3,#0x0
   \   000075   7407         MOV     A,#0x7
   \   000077   C3           CLR     C
   \   000078   9E           SUBB    A,R6
   \   000079   78..         MOV     R0,#?V0 + 2
   \   00007B   12....       LCALL   ?SS_SHR
   \   00007E   E5..         MOV     A,?V0 + 2
   \   000080   6005         JZ      ??HalLcd_Convert_DZK_3
    785              {
    786                  temp = ASCIITAB_DZK[addr + j];
    787                  temp = temp & mask;
    788                  temp = temp >> (7 - index);
    789                  if (temp)
    790                  {
    791                      return_val |=  mask_array[7-j];
   \   000082   EF           MOV     A,R7
   \   000083   42..         ORL     ?V0 + 0,A
   \   000085   8004         SJMP    ??HalLcd_Convert_DZK_4
    792                  }
    793                  else
    794                  {
    795                      return_val &=  ~mask_array[7-j];
   \                     ??HalLcd_Convert_DZK_3:
   \   000087   EF           MOV     A,R7
   \   000088   F4           CPL     A
   \   000089   52..         ANL     ?V0 + 0,A
    796                  }
    797              }
   \                     ??HalLcd_Convert_DZK_4:
   \   00008B   0C           INC     R4
   \   00008C   EC           MOV     A,R4
   \   00008D   C3           CLR     C
   \   00008E   9406         SUBB    A,#0x6
   \   000090   40A5         JC      ??HalLcd_Convert_DZK_2
    798          
    799              return return_val;
   \   000092   A9..         MOV     R1,?V0 + 0
   \                     ??HalLcd_Convert_DZK_1:
   \   000094   7408         MOV     A,#0x8
   \   000096   12....       LCALL   ?DEALLOC_XSTACK8
   \   000099   02....       LJMP    ?Subroutine10 & 0xFFFF
    800          }
    801          
    802          /**************************************************************************************************
    803           * @fn          halLcdWriteLine
    804           *
    805           * @brief       Write one line on display
    806           *
    807           * @param       uint8 line - display line
    808           *              char *pText - text buffer to write
    809           *
    810           * @return      none
    811           **************************************************************************************************/

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    812          void HalLcd_HW_WriteLine(uint8 line, const char *pText)
   \                     HalLcd_HW_WriteLine:
    813          {
   \   000000   74F5         MOV     A,#-0xb
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 11
   \   000005                ; Auto size: 0
   \   000005   89..         MOV     ?V0 + 1,R1
   \   000007   EA           MOV     A,R2
   \   000008   FE           MOV     R6,A
   \   000009   EB           MOV     A,R3
   \   00000A   FF           MOV     R7,A
    814            uint8 count;
    815            uint8 totalLength = (uint8)osal_strlen( (char *)pText );
   \   00000B                ; Setup parameters for call to function osal_strlen
   \   00000B   12....       LCALL   ??osal_strlen?relay
   \   00000E   EA           MOV     A,R2
   \   00000F   F5..         MOV     ?V0 + 2,A
    816          
    817            /* Write the content first */
    818            for (count=0; count<totalLength; count++)
   \   000011   75..00       MOV     ?V0 + 0,#0x0
   \   000014   8018         SJMP    ??HalLcd_HW_WriteLine_0
    819            {
    820              HalLcd_HW_WriteChar(line, count, (*(pText++)));
   \                     ??HalLcd_HW_WriteLine_1:
   \   000016                ; Setup parameters for call to function HalLcd_HW_WriteChar
   \   000016   8E82         MOV     DPL,R6
   \   000018   8F83         MOV     DPH,R7
   \   00001A   E0           MOVX    A,@DPTR
   \   00001B   FB           MOV     R3,A
   \   00001C   AA..         MOV     R2,?V0 + 0
   \   00001E   A9..         MOV     R1,?V0 + 1
   \   000020   12....       LCALL   ??HalLcd_HW_WriteChar?relay
   \   000023   8E82         MOV     DPL,R6
   \   000025   8F83         MOV     DPH,R7
   \   000027   A3           INC     DPTR
   \   000028   AE82         MOV     R6,DPL
   \   00002A   AF83         MOV     R7,DPH
    821            }
   \   00002C   05..         INC     ?V0 + 0
   \                     ??HalLcd_HW_WriteLine_0:
   \   00002E   E5..         MOV     A,?V0 + 0
   \   000030   C3           CLR     C
   \   000031   95..         SUBB    A,?V0 + 2
   \   000033   40E1         JC      ??HalLcd_HW_WriteLine_1
    822          
    823            /* Write blank spaces to rest of the line */
    824            for(count=totalLength; count<LCD_MAX_LINE_LENGTH;count++)
   \   000035   85....       MOV     ?V0 + 0,?V0 + 2
   \   000038   800B         SJMP    ??HalLcd_HW_WriteLine_2
    825            {
    826              HalLcd_HW_WriteChar(line, count, ' ');
   \                     ??HalLcd_HW_WriteLine_3:
   \   00003A                ; Setup parameters for call to function HalLcd_HW_WriteChar
   \   00003A   7B20         MOV     R3,#0x20
   \   00003C   AA..         MOV     R2,?V0 + 0
   \   00003E   A9..         MOV     R1,?V0 + 1
   \   000040   12....       LCALL   ??HalLcd_HW_WriteChar?relay
    827            }
   \   000043   05..         INC     ?V0 + 0
   \                     ??HalLcd_HW_WriteLine_2:
   \   000045   E5..         MOV     A,?V0 + 0
   \   000047   C3           CLR     C
   \   000048   9410         SUBB    A,#0x10
   \   00004A   40EE         JC      ??HalLcd_HW_WriteLine_3
    828          }
   \   00004C   7F03         MOV     R7,#0x3
   \   00004E   02....       LJMP    ?BANKED_LEAVE_XDATA
    829          
    830          /**************************************************************************************************
    831           * @fn      HalLcd_HW_WaitUs
    832           *
    833           * @brief   wait for x us. @ 32MHz MCU clock it takes 32 "nop"s for 1 us delay.
    834           *
    835           * @param   x us. range[0-65536]
    836           *
    837           * @return  None
    838           **************************************************************************************************/

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    839          void HalLcd_HW_WaitUs(uint16 microSecs)
   \                     HalLcd_HW_WaitUs:
    840          {
   \   000000                ; Saved register size: 0
   \   000000                ; Auto size: 0
   \   000000   8020         SJMP    ??HalLcd_HW_WaitUs_0
    841            while(microSecs--)
    842            {
    843              /* 32 NOPs == 1 usecs */
    844              asm("nop"); asm("nop"); asm("nop"); asm("nop"); asm("nop");
   \                     ??HalLcd_HW_WaitUs_1:
   \   000002   00           nop
   \   000003   00           nop
   \   000004   00           nop
   \   000005   00           nop
   \   000006   00           nop
    845              asm("nop"); asm("nop"); asm("nop"); asm("nop"); asm("nop");
   \   000007   00           nop
   \   000008   00           nop
   \   000009   00           nop
   \   00000A   00           nop
   \   00000B   00           nop
    846              asm("nop"); asm("nop"); asm("nop"); asm("nop"); asm("nop");
   \   00000C   00           nop
   \   00000D   00           nop
   \   00000E   00           nop
   \   00000F   00           nop
   \   000010   00           nop
    847              asm("nop"); asm("nop"); asm("nop"); asm("nop"); asm("nop");
   \   000011   00           nop
   \   000012   00           nop
   \   000013   00           nop
   \   000014   00           nop
   \   000015   00           nop
    848              asm("nop"); asm("nop"); asm("nop"); asm("nop"); asm("nop");
   \   000016   00           nop
   \   000017   00           nop
   \   000018   00           nop
   \   000019   00           nop
   \   00001A   00           nop
    849              asm("nop"); asm("nop"); asm("nop"); asm("nop"); asm("nop");
   \   00001B   00           nop
   \   00001C   00           nop
   \   00001D   00           nop
   \   00001E   00           nop
   \   00001F   00           nop
    850              asm("nop"); asm("nop");
   \   000020   00           nop
   \   000021   00           nop
    851            }
   \                     ??HalLcd_HW_WaitUs_0:
   \   000022   EA           MOV     A,R2
   \   000023   F8           MOV     R0,A
   \   000024   EB           MOV     A,R3
   \   000025   F9           MOV     R1,A
   \   000026   74FF         MOV     A,#-0x1
   \   000028   28           ADD     A,R0
   \   000029   1A           DEC     R2
   \   00002A   74FF         MOV     A,#-0x1
   \   00002C   39           ADDC    A,R1
   \   00002D   FB           MOV     R3,A
   \   00002E   E8           MOV     A,R0
   \   00002F   7001         JNZ     ??HalLcd_HW_WaitUs_2
   \   000031   E9           MOV     A,R1
   \                     ??HalLcd_HW_WaitUs_2:
   \   000032   70CE         JNZ     ??HalLcd_HW_WaitUs_1
    852          }
   \   000034   02....       LJMP    ?BRET

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??HalLcdInit?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    HalLcdInit

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??SET_DDRAM_ADDR?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    SET_DDRAM_ADDR

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??HalLcdWriteString?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    HalLcdWriteString

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??HalLcdWriteValue?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    HalLcdWriteValue

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??HalLcdWriteScreen?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    HalLcdWriteScreen

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??HalLcdWriteStringValue?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    HalLcdWriteStringValue

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??HalLcdWriteStringValueValue?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    HalLcdWriteStringValueValue

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??HalLcdDisplayPercentBar?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    HalLcdDisplayPercentBar

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??HalLcd_HW_Init?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    HalLcd_HW_Init

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??HalLcd_HW_Control?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    HalLcd_HW_Control

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??HalLcd_HW_Write?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    HalLcd_HW_Write

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??HalLcd_HW_SetContrast?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    HalLcd_HW_SetContrast

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??HalLcd_HW_Clear?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    HalLcd_HW_Clear

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??HalLcd_HW_WriteChar?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    HalLcd_HW_WriteChar

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??HalLcd_Convert_DZK?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    HalLcd_Convert_DZK

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??HalLcd_HW_WriteLine?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    HalLcd_HW_WriteLine

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??HalLcd_HW_WaitUs?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    HalLcd_HW_WaitUs

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant "TexasInstruments">`:
   \   000000   54657861     DB "TexasInstruments"
   \            73496E73
   \            7472756D
   \            656E7473
   \            00      

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant "[          ]  ">`:
   \   000000   5B202020     DB "[          ]  "
   \            20202020
   \            2020205D
   \            202000  

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant {128, 64, 32, 16, 8, 4, 2, 1}>`:
   \   000000   80402010     DB 128, 64, 32, 16, 8, 4, 2, 1
   \            08040201
    853          #endif
    854          
    855          
    856          /**************************************************************************************************
    857          **************************************************************************************************/
    858          
    859          
    860          

   Maximum stack usage in bytes:

     Function                    ISTACK PSTACK XSTACK
     --------                    ------ ------ ------
     HalLcdDisplayPercentBar         1      0     35
       -> HalLcdWriteString          0      0     64
       -> osal_memcpy                0      0     70
       -> _ltoa                      0      0     68
       -> HalLcdWriteString          0      0     64
     HalLcdInit                      2      0      0
       -> HalLcd_HW_Init             4      0      0
     HalLcdWriteScreen               0      0      9
       -> HalLcdWriteString          0      0     18
       -> HalLcdWriteString          0      0     18
     HalLcdWriteString               1      0     70
       -> osal_mem_alloc             0      0     48
       -> HalLcdWriteString          0      0     48
       -> osal_strlen                0      0     48
       -> osal_memcpy                0      0     54
       -> osal_strlen                0      0     48
       -> osal_mem_alloc             0      0     48
       -> osal_memcpy                0      0     54
       -> osal_memcpy                0      0     54
       -> debug_str                  0      0     48
       -> osal_mem_free              0      0     48
       -> HalLcd_HW_WriteLine        0      0     48
     HalLcdWriteStringValue          1      0     47
       -> osal_strlen                0      0     86
       -> osal_memcpy                0      0     92
       -> _ltoa                      0      0     90
       -> HalLcdWriteString          0      0     86
     HalLcdWriteStringValueValue     1      0     50
       -> osal_strlen                0      0     86
       -> osal_memcpy                0      0     92
       -> _ltoa                      0      0     90
       -> osal_strlen                0      0     86
       -> _ltoa                      0      0     90
       -> HalLcdWriteString          0      0     86
     HalLcdWriteValue                0      0     42
       -> _ltoa                      0      0     82
       -> HalLcdWriteString          0      0     78
     HalLcd_Convert_DZK              2      0     32
     HalLcd_HW_Clear                 0      0      9
       -> SET_DDRAM_ADDR             0      0     18
       -> HalLcd_HW_Write            0      0     18
     HalLcd_HW_Control               0      0      9
     HalLcd_HW_Init                  2      0      0
       -> HalLcd_HW_Control          4      0      0
       -> HalLcd_HW_Control          4      0      0
       -> HalLcd_HW_Control          4      0      0
       -> HalLcd_HW_Control          4      0      0
       -> HalLcd_HW_Control          4      0      0
       -> HalLcd_HW_Control          4      0      0
       -> HalLcd_HW_Control          4      0      0
       -> HalLcd_HW_Control          4      0      0
       -> HalLcd_HW_Control          4      0      0
       -> HalLcd_HW_Control          4      0      0
       -> HalLcd_HW_Control          4      0      0
       -> HalLcd_HW_Control          4      0      0
       -> HalLcd_HW_Clear            4      0      0
     HalLcd_HW_SetContrast           0      0      9
       -> HalLcd_HW_Control          0      0     18
       -> HalLcd_HW_Control          0      0     18
     HalLcd_HW_WaitUs                0      0      0
     HalLcd_HW_Write                 0      0     12
     HalLcd_HW_WriteChar             0      0     23
       -> SET_DDRAM_ADDR             0      0     24
       -> HalLcd_Convert_DZK         0      0     24
       -> HalLcd_HW_Write            0      0     24
       -> SET_DDRAM_ADDR             0      0     24
       -> HalLcd_Convert_DZK         0      0     24
       -> HalLcd_HW_Write            0      0     24
     HalLcd_HW_WriteLine             0      0     35
       -> osal_strlen                0      0     22
       -> HalLcd_HW_WriteChar        0      0     22
       -> HalLcd_HW_WriteChar        0      0     22
     SET_DDRAM_ADDR                  0      0     21
       -> HalLcd_HW_Control          0      0     18
       -> HalLcd_HW_Control          0      0     18
       -> HalLcd_HW_Control          0      0     18


   Segment part sizes:

     Function/Label                            Bytes
     --------------                            -----
     _A_P0                                        1
     _A_P1                                        1
     PERCFG                                       1
     P0SEL                                        1
     P1SEL                                        1
     _A_U1CSR                                     1
     U1DBUF                                       1
     U1BAUD                                       1
     U1UCR                                        1
     U1GCR                                        1
     P0DIR                                        1
     P1DIR                                        1
     ASCIITAB_DZK                              1152
     Lcd_Line1                                    2
     HalLcdInit                                  14
     ?Subroutine7                                 7
     SET_DDRAM_ADDR                              30
     ?Subroutine8                                 4
     ??Subroutine11_0                             5
     HalLcdWriteString                          281
     ??Subroutine12_0                             8
     ??Subroutine13_0                             6
     HalLcdWriteValue                            65
     ??Subroutine15_0                             6
     HalLcdWriteScreen                           25
     HalLcdWriteStringValue                      97
     ?Subroutine9                                23
     ?Subroutine0                                 4
     ?Subroutine2                                 7
     ?Subroutine1                                 4
     ??Subroutine14_0                             4
     HalLcdWriteStringValueValue                220
     ?Subroutine3                                 4
     HalLcdDisplayPercentBar                    151
     ?Subroutine4                                19
     HalLcd_HW_Init                             123
     HalLcd_HW_Control                           19
     ?Subroutine6                                 9
     HalLcd_HW_Write                             21
     HalLcd_HW_SetContrast                       16
     HalLcd_HW_Clear                             38
     HalLcd_HW_WriteChar                        125
     ?Subroutine10                                5
     ?Subroutine5                                11
     HalLcd_Convert_DZK                         156
     HalLcd_HW_WriteLine                         81
     HalLcd_HW_WaitUs                            55
     ??HalLcdInit?relay                           6
     ??SET_DDRAM_ADDR?relay                       6
     ??HalLcdWriteString?relay                    6
     ??HalLcdWriteValue?relay                     6
     ??HalLcdWriteScreen?relay                    6
     ??HalLcdWriteStringValue?relay               6
     ??HalLcdWriteStringValueValue?relay          6
     ??HalLcdDisplayPercentBar?relay              6
     ??HalLcd_HW_Init?relay                       6
     ??HalLcd_HW_Control?relay                    6
     ??HalLcd_HW_Write?relay                      6
     ??HalLcd_HW_SetContrast?relay                6
     ??HalLcd_HW_Clear?relay                      6
     ??HalLcd_HW_WriteChar?relay                  6
     ??HalLcd_Convert_DZK?relay                   6
     ??HalLcd_HW_WriteLine?relay                  6
     ??HalLcd_HW_WaitUs?relay                     6
     ?<Constant "TexasInstruments">              17
     ?<Constant "[          ]  ">                15
     ?<Constant {128, 64, 32, 16, 8, 4, 2, 1}>    8

 
 1 643 bytes in segment BANKED_CODE
   102 bytes in segment BANK_RELAYS
 1 152 bytes in segment CODE_C
    12 bytes in segment SFR_AN
    40 bytes in segment XDATA_ROM_C
     2 bytes in segment XDATA_Z
 
 2 897 bytes of CODE  memory
    40 bytes of CONST memory
     0 bytes of DATA  memory (+ 12 bytes shared)
     2 bytes of XDATA memory

Errors: none
Warnings: none
